import{a as Je}from"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-SUAXQA7S.js";import{a as De,b as Dt,c as an,d as cn,e as gn,f as oi,g as Pn,h as q,j as Ut,k as Dn,l as Ln}from"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-TANETF7T.js";import{a as On,b as Rn,h as Bn}from"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-OX2TQWP3.js";import{a as Nn}from"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-SX5XXL7L.js";import{c as te,d as Lt,e as dn,f as Ee,g as ln,k as xn,m as kn,o as Cn,q as Tn,s as In,t as _n,u as An,v as Mn}from"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-7EIMGQNX.js";import"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-KK7CQ4JV.js";import{g as Un,j as Fn}from"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-OZCYFSTZ.js";import"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-JGPA7IEV.js";import{a as un,b as pn,d as xe,e as mn,h as Le,i as ke}from"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-MBLSQZS4.js";import"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-PRTMPY4Z.js";import{a as Qr,b as en,c as Bt,d as tn,e as rn,f as nn,i as on,j as sn,k as ce}from"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-SF4MVX32.js";import"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-FQKGHVTY.js";import{a as or,d as fn,e as Xe}from"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-SRD33W4W.js";import{a as sr,b as ar}from"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-OCE6DKKA.js";import{a as Oe}from"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-WQULFTKF.js";import"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-ENGDPZNZ.js";import"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-QDXCQ26L.js";import"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-66LACRXU.js";import{a as _r,d as Ar,e as J,f as Mr,g as se}from"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-IOS6VLKN.js";import{$a as Ge,A as hr,B as xt,C as ve,Ca as _t,D as kt,Db as Be,E as qe,Ea as At,F as yr,Fa as ae,Fb as Yr,G as Ct,Ga as G,H as br,Hb as Zr,I as wr,Ib as Rt,J as vr,Jb as Xr,Jc as En,K as Sr,L as Pe,Lb as Jr,M as Er,Mb as Ze,N as xr,Na as Br,O as kr,Oa as ee,Q as Cr,R as Tr,Sa as Mt,Ta as Nt,Ua as Se,V as Ir,Va as Dr,W as F,Xa as ge,Xb as j,Ya as Lr,Za as Ur,_a as Fr,a as ri,ab as Ye,ac as hn,b as ni,c as L,cb as $r,d as U,e as g,f as z,g as me,gb as Kr,h as O,ha as Nr,hb as Hr,i as X,ia as Q,ib as Wr,j as ir,k as E,kb as zr,l as cr,lb as Vr,lc as yn,m as dr,mb as jr,mc as bn,n as H,nb as Re,o as Ne,oa as Tt,ob as Pt,oc as wn,p as _,q as lr,qc as vn,r as ur,s as pr,sc as Sn,t as mr,ta as It,tb as qr,u as gr,ua as Pr,ub as fe,v as fr,vb as Ot,w as M,wa as Or,x as St,xa as Rr,y as ie,yb as Gr,z as Et}from"./f74c6542d07f56fcb969d3e70fbf25eeb9336887-chunk-4S2LUVHF.js";var Wo=ri((Ke,pt)=>{g();(function(t,e){"use strict";var r="0.7.33",n="",o="?",a="function",l="undefined",u="object",p="string",y="major",i="model",m="name",d="type",s="vendor",c="version",b="architecture",w="console",h="mobile",f="tablet",v="smarttv",N="wearable",x="embedded",R=350,B="Amazon",$="Apple",oe="ASUS",ue="BlackBerry",Z="Browser",pe="Chrome",mt="Edge",ye="Firefox",be="Google",Ie="Huawei",gt="LG",ft="Microsoft",Zt="Motorola",He="Opera",ht="Samsung",Xt="Sharp",We="Sony",yt="Xiaomi",bt="Zebra",Jt="Facebook",Qo=function(k,A){var C={};for(var D in k)A[D]&&A[D].length%2===0?C[D]=A[D].concat(k[D]):C[D]=k[D];return C},ze=function(k){for(var A={},C=0;C<k.length;C++)A[k[C].toUpperCase()]=k[C];return A},Qt=function(k,A){return typeof k===p?_e(A).indexOf(_e(k))!==-1:!1},_e=function(k){return k.toLowerCase()},ei=function(k){return typeof k===p?k.replace(/[^\d\.]/g,n).split(".")[0]:e},wt=function(k,A){if(typeof k===p)return k=k.replace(/^\s\s*/,n),typeof A===l?k:k.substring(0,R)},Ae=function(k,A){for(var C=0,D,T,je,P,Me,Y;C<A.length&&!Me;){var rr=A[C],nr=A[C+1];for(D=T=0;D<rr.length&&!Me;)if(Me=rr[D++].exec(k),Me)for(je=0;je<nr.length;je++)Y=Me[++T],P=nr[je],typeof P===u&&P.length>0?P.length===2?typeof P[1]==a?this[P[0]]=P[1].call(this,Y):this[P[0]]=P[1]:P.length===3?typeof P[1]===a&&!(P[1].exec&&P[1].test)?this[P[0]]=Y?P[1].call(this,Y,P[2]):e:this[P[0]]=Y?Y.replace(P[1],P[2]):e:P.length===4&&(this[P[0]]=Y?P[3].call(this,Y.replace(P[1],P[2])):e):this[P]=Y||e;C+=2}},vt=function(k,A){for(var C in A)if(typeof A[C]===u&&A[C].length>0){for(var D=0;D<A[C].length;D++)if(Qt(A[C][D],k))return C===o?e:C}else if(Qt(A[C],k))return C===o?e:C;return k},ti={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},er={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},tr={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[c,[m,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[c,[m,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[m,c],[/opios[\/ ]+([\w\.]+)/i],[c,[m,He+" Mini"]],[/\bopr\/([\w\.]+)/i],[c,[m,He]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[m,c],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[c,[m,"UC"+Z]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[c,[m,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[c,[m,"WeChat"]],[/konqueror\/([\w\.]+)/i],[c,[m,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[c,[m,"IE"]],[/yabrowser\/([\w\.]+)/i],[c,[m,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[m,/(.+)/,"$1 Secure "+Z],c],[/\bfocus\/([\w\.]+)/i],[c,[m,ye+" Focus"]],[/\bopt\/([\w\.]+)/i],[c,[m,He+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[c,[m,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[c,[m,"Dolphin"]],[/coast\/([\w\.]+)/i],[c,[m,He+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[c,[m,"MIUI "+Z]],[/fxios\/([-\w\.]+)/i],[c,[m,ye]],[/\bqihu|(qi?ho?o?|360)browser/i],[[m,"360 "+Z]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[m,/(.+)/,"$1 "+Z],c],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],c],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[m,c],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[m],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[m,Jt],c],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[m,c],[/\bgsa\/([\w\.]+) .*safari\//i],[c,[m,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[c,[m,pe+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[m,pe+" WebView"],c],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[c,[m,"Android "+Z]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[m,c],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[c,[m,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[c,m],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[m,[c,vt,ti]],[/(webkit|khtml)\/([\w\.]+)/i],[m,c],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[m,"Netscape"],c],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[c,[m,ye+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[m,c],[/(cobalt)\/([\w\.]+)/i],[m,[c,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,_e]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/windows (ce|mobile); ppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[b,/ower/,n,_e]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[b,_e]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[i,[s,ht],[d,f]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[i,[s,ht],[d,h]],[/((ipod|iphone)\d+,\d+)/i],[i,[s,$],[d,h]],[/(ipad\d+,\d+)/i],[i,[s,$],[d,f]],[/\((ip(?:hone|od)[\w ]*);/i],[i,[s,$],[d,h]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[i,[s,$],[d,f]],[/(macintosh);/i],[i,[s,$]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[i,[s,Ie],[d,f]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[i,[s,Ie],[d,h]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[i,/_/g," "],[s,yt],[d,h]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[i,/_/g," "],[s,yt],[d,f]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[i,[s,"OPPO"],[d,h]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[i,[s,"Vivo"],[d,h]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[i,[s,"Realme"],[d,h]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[i,[s,Zt],[d,h]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[i,[s,Zt],[d,f]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[i,[s,gt],[d,f]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[i,[s,gt],[d,h]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[i,[s,"Lenovo"],[d,f]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[i,/_/g," "],[s,"Nokia"],[d,h]],[/(pixel c)\b/i],[i,[s,be],[d,f]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[i,[s,be],[d,h]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[i,[s,We],[d,h]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[i,"Xperia Tablet"],[s,We],[d,f]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[i,[s,"OnePlus"],[d,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[i,[s,B],[d,f]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[i,/(.+)/g,"Fire Phone $1"],[s,B],[d,h]],[/(playbook);[-\w\),; ]+(rim)/i],[i,s,[d,f]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[i,[s,ue],[d,h]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[i,[s,oe],[d,f]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[i,[s,oe],[d,h]],[/(nexus 9)/i],[i,[s,"HTC"],[d,f]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[s,[i,/_/g," "],[d,h]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[i,[s,"Acer"],[d,f]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[i,[s,"Meizu"],[d,h]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[i,[s,Xt],[d,h]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[s,i,[d,h]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[s,i,[d,f]],[/(surface duo)/i],[i,[s,ft],[d,f]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[i,[s,"Fairphone"],[d,h]],[/(u304aa)/i],[i,[s,"AT&T"],[d,h]],[/\bsie-(\w*)/i],[i,[s,"Siemens"],[d,h]],[/\b(rct\w+) b/i],[i,[s,"RCA"],[d,f]],[/\b(venue[\d ]{2,7}) b/i],[i,[s,"Dell"],[d,f]],[/\b(q(?:mv|ta)\w+) b/i],[i,[s,"Verizon"],[d,f]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[i,[s,"Barnes & Noble"],[d,f]],[/\b(tm\d{3}\w+) b/i],[i,[s,"NuVision"],[d,f]],[/\b(k88) b/i],[i,[s,"ZTE"],[d,f]],[/\b(nx\d{3}j) b/i],[i,[s,"ZTE"],[d,h]],[/\b(gen\d{3}) b.+49h/i],[i,[s,"Swiss"],[d,h]],[/\b(zur\d{3}) b/i],[i,[s,"Swiss"],[d,f]],[/\b((zeki)?tb.*\b) b/i],[i,[s,"Zeki"],[d,f]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[s,"Dragon Touch"],i,[d,f]],[/\b(ns-?\w{0,9}) b/i],[i,[s,"Insignia"],[d,f]],[/\b((nxa|next)-?\w{0,9}) b/i],[i,[s,"NextBook"],[d,f]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[s,"Voice"],i,[d,h]],[/\b(lvtel\-)?(v1[12]) b/i],[[s,"LvTel"],i,[d,h]],[/\b(ph-1) /i],[i,[s,"Essential"],[d,h]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[i,[s,"Envizen"],[d,f]],[/\b(trio[-\w\. ]+) b/i],[i,[s,"MachSpeed"],[d,f]],[/\btu_(1491) b/i],[i,[s,"Rotor"],[d,f]],[/(shield[\w ]+) b/i],[i,[s,"Nvidia"],[d,f]],[/(sprint) (\w+)/i],[s,i,[d,h]],[/(kin\.[onetw]{3})/i],[[i,/\./g," "],[s,ft],[d,h]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[i,[s,bt],[d,f]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[i,[s,bt],[d,h]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[s,i,[d,w]],[/droid.+; (shield) bui/i],[i,[s,"Nvidia"],[d,w]],[/(playstation [345portablevi]+)/i],[i,[s,We],[d,w]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[i,[s,ft],[d,w]],[/smart-tv.+(samsung)/i],[s,[d,v]],[/hbbtv.+maple;(\d+)/i],[[i,/^/,"SmartTV"],[s,ht],[d,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[s,gt],[d,v]],[/(apple) ?tv/i],[s,[i,$+" TV"],[d,v]],[/crkey/i],[[i,pe+"cast"],[s,be],[d,v]],[/droid.+aft(\w)( bui|\))/i],[i,[s,B],[d,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[i,[s,Xt],[d,v]],[/(bravia[\w ]+)( bui|\))/i],[i,[s,We],[d,v]],[/(mitv-\w{5}) bui/i],[i,[s,yt],[d,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[s,wt],[i,wt],[d,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,v]],[/((pebble))app/i],[s,i,[d,N]],[/droid.+; (glass) \d/i],[i,[s,be],[d,N]],[/droid.+; (wt63?0{2,3})\)/i],[i,[s,bt],[d,N]],[/(quest( 2)?)/i],[i,[s,Jt],[d,N]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[s,[d,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[i,[d,h]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[i,[d,f]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,f]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,h]],[/(android[-\w\. ]{0,9});.+buil/i],[i,[s,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[c,[m,mt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[c,[m,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[m,c],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[c,m]],os:[[/microsoft (windows) (vista|xp)/i],[m,c],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[m,[c,vt,er]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,"Windows"],[c,vt,er]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[c,/_/g,"."],[m,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[m,"Mac OS"],[c,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[c,m],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[m,c],[/\(bb(10);/i],[c,[m,ue]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[c,[m,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[c,[m,ye+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[c,[m,"webOS"]],[/crkey\/([\d\.]+)/i],[c,[m,pe+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[m,"Chromium OS"],c],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[m,c],[/(sunos) ?([\w\.\d]*)/i],[[m,"Solaris"],c],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[m,c]]},V=function(k,A){if(typeof k===u&&(A=k,k=e),!(this instanceof V))return new V(k,A).getResult();var C=k||(typeof t!==l&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:n),D=A?Qo(tr,A):tr;return this.getBrowser=function(){var T={};return T[m]=e,T[c]=e,Ae.call(T,C,D.browser),T.major=ei(T.version),T},this.getCPU=function(){var T={};return T[b]=e,Ae.call(T,C,D.cpu),T},this.getDevice=function(){var T={};return T[s]=e,T[i]=e,T[d]=e,Ae.call(T,C,D.device),T},this.getEngine=function(){var T={};return T[m]=e,T[c]=e,Ae.call(T,C,D.engine),T},this.getOS=function(){var T={};return T[m]=e,T[c]=e,Ae.call(T,C,D.os),T},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return C},this.setUA=function(T){return C=typeof T===p&&T.length>R?wt(T,R):T,this},this.setUA(C),this};V.VERSION=r,V.BROWSER=ze([m,c,y]),V.CPU=ze([b]),V.DEVICE=ze([i,s,d,w,h,v,f,N,x]),V.ENGINE=V.OS=ze([m,c]),typeof Ke!==l?(typeof pt!==l&&pt.exports&&(Ke=pt.exports=V),Ke.UAParser=V):a==="object"&&null.amd?null(function(){return V}):typeof t!==l&&(t.UAParser=V);var we=typeof t!==l&&(t.jQuery||t.Zepto);if(we&&!we.ua){var Ve=new V;we.ua=Ve.getResult(),we.ua.get=function(){return Ve.getUA()},we.ua.set=function(k){Ve.setUA(k);var A=Ve.getResult();for(var C in A)we.ua[C]=A[C]}}})(typeof window=="object"?window:Ke)});g();g();(function(){try{var t=typeof window<"u"||typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="9d6d1544-3a7b-4b5b-b1c2-0ddf6c4eb707",t._sentryDebugIdIdentifier="sentry-dbid-9d6d1544-3a7b-4b5b-b1c2-0ddf6c4eb707")}catch(r){}})();g();var Zo=L(z()),Xo=L(or());g();var nt=L(z());g();var S=L(z());g();if(typeof document<"u"){let t=document.createElement("style"),e=window.engagement,r=e&&e._configuration&&e._configuration.nonce;if(r)t.setAttribute("nonce",r);else{let n=document.querySelector("[nonce]");if(n){let o=n.nonce||n.getAttribute("nonce");o&&t.setAttribute("nonce",o)}}t.appendChild(document.createTextNode(`#engagement-wrapper *,
#engagement-wrapper *:before,
#engagement-wrapper *:after,
.engagement-nudge-modal *,
.engagement-nudge-modal *:before,
.engagement-nudge-modal *:after,
.engagement-nudge-modal-mock *,
.engagement-nudge-modal-mock *:before,
.engagement-nudge-modal-mock *:after {
  box-sizing: border-box;
}

.engagement-modal > .rc-dialog > .rc-dialog-content {
  background-color: transparent;
}

.engagement-tooltip {
  z-index: 2147483647 !important; /*make the tooltip the highest possible z index*/
}

/*** Hack: Hide this because it's less flexible (classnames can't be changes)
    Instead we only show its children, by translating its children ***/
.engagement-modal > .rc-dialog > .rc-dialog-content > .rc-dialog-header {
  max-height: 0px !important;
  padding: 0px !important;
}

.engagement-modal > .rc-dialog {
  left: 0px;
  transition: left 0.3s;
}

.engagement-modal > .rc-dialog > .rc-dialog-content > .rc-dialog-body {
  position: relative !important;
}

/* TestMode inline engagement */
.engagement-modal-inline.rc-dialog-wrap {
  position: relative;
  height: 100%;
}

#engagement-toast-container {
  inset: 16px;
  @media (max-width: 400px) {
    inset: 8px;
  }
}

#engagement-toast-responsive-inner-div {
  @media (max-width: 400px) {
    width: 100%;
  }
}


#engagement-container > div {
  height: 100%;
}

#engagement-home > .rc-dialog-root {
  height: 100%;
}

#engagement-wrapper .rc-header-guidance {
  background: rgba(174, 177, 221, 1) !important;
  filter: brightness(135%);
  border-radius: 2px 2px 0px 0px !important;
  border-bottom: 0px !important;
  padding: 8px 30px 2px 30px !important;
  margin: 0px 10px 0px 10px;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 3px 10px !important;
  font-weight: 400;
  text-align: center;
}

@keyframes fontbulger {
  0% {
    font-size: 10px;
  }
  30% {
    font-size: 15px;
  }
  100% {
    font-size: 12px;
  }
}

@keyframes shimmer {
  0% {
    background-position: top left;
  }
  100% {
    background-position: top right;
  }
}

.engagement-category-collapse {
  transform: scale(1, -1);
  transition: 0.3s ease-in;
  cursor: pointer;
}

.engagement-category-expand {
  transition: 0.3s ease-in;
  cursor: pointer;
}

/* Nudges - modal */

.engagement-nudge-modal {
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2147483644 !important;
}

.engagement-nudge-modal-mock {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 0;
  transition: margin-right cubic-bezier(0.78, 0.14, 0.15, 0.86) 0.3s;
  z-index: 2147483644 !important;
}

/* Nudges - media */

.engagement-help-doc-title::before {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(180deg, transparent 66.67%, gray 93.08%);
  content: '';
}

/* Recorder */
#engagement-recorder-mask {
  background: transparent;
}
`)),document.head.appendChild(t)}g();if(typeof document<"u"){let t=document.createElement("style"),e=window.engagement,r=e&&e._configuration&&e._configuration.nonce;if(r)t.setAttribute("nonce",r);else{let n=document.querySelector("[nonce]");if(n){let o=n.nonce||n.getAttribute("nonce");o&&t.setAttribute("nonce",o)}}t.appendChild(document.createTextNode(`/*** Guidance banner styling and animation ***/
@keyframes example {
  from {
    transform: translateY(0px);
  }
  to {
    transform: translateY(-30px);
  }
}

.rc-header-guidance {
  animation: example 0.5s;
  animation-fill-mode: forwards;
}

/*** engagement entry animation ***/
/*** We can't do exit animation because rc-dialog makes display: none ***/
@keyframes onEntry {
  0% {
    opacity: 0.3;
  }
  100% {
    opacity: 1;
  }
}

.engagement-opened {
  animation: onEntry 0.1s;
  animation-fill-mode: forwards;
}

@keyframes onSelect {
  0% {
    transform: translate3d(0px, 0px, 0px);
  }
  50% {
    transform: translate3d(0px, 0px, -0.5px);
  }
  100% {
    transform: translate3d(0px, 0px, 0px);
  }
}

.engagement-selected {
  animation: onSelect 0.4s;
}

@keyframes ScaleEntry {
  from {
    transform: scale(0.8);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.engagement-scale-entry-animation {
  animation: ScaleEntry 0.3s;
  animation-fill-mode: forwards;
}

@keyframes onEntry {
  0% {
    opacity: 0.3;
  }
  100% {
    opacity: 1;
  }
}

.engagement-shortcut-tooltip {
  opacity: 0;
  animation: tagEntry 0.2s;
  animation-delay: 0.5s;
  animation-fill-mode: forwards;
}

@keyframes tagExit {
  from {
    transform: scale(1);
    opacity: 1;
  }
  to {
    transform: scale(0.8);
    opacity: 0;
  }
}

.engagement-shortcut-tooltip-remove {
  animation: tagExit 0.2s;
  animation-fill-mode: forwards;
}

.engagement-shortcut-tooltip,
.engagement-shortcut-tooltip-remove {
  z-index: 99999999;
  position: absolute;
  padding: 8px 12px;
  background-color: rgba(0, 0, 0, 0.8);
  font-family: proxima-nova, sans-serif;
  color: rgba(255, 255, 255, 0.6);
  border-radius: 4px;
  font-size: 13px;
}

.engagement-shortcut-tooltip-tag {
  margin-left: 10px;
  padding: 2px 5px;
  border-radius: 2px;
  background-color: grey;
}

#engagement-launcher {
  animation: 0.25s ease-out scaleIn;
}

@keyframes scaleIn {
  0% {
    transform: scale(0.06);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes growFromBottom {
  0% {
    transform: scale(1, 0.3);
  }

  100% {
    transform: scale(1, 1);
  }
}
`)),document.head.appendChild(t)}g();var Ft=class{constructor(){U(this,"organization")}getOrganization(){return this.organization}setOrganization(e){this.organization=e}},$n=new Ft;g();var ii=function(e,r,n){for(var o=0,a=0;o=a,a=qe(),o===38&&a===12&&(r[n]=1),!Ct(a);)kt();return yr(e,xt)},si=function(e,r){var n=-1,o=44;do switch(Ct(o)){case 0:o===38&&qe()===12&&(r[n]=1),e[n]+=ii(xt-1,r,n);break;case 2:e[n]+=vr(o);break;case 4:if(o===44){e[++n]=qe()===58?"&\f":"",r[n]=e[n].length;break}default:e[n]+=mr(o)}while(o=kt());return e},ai=function(e,r){return wr(si(br(e),r))},Kn=new WeakMap,ci=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var r=e.value,n=e.parent,o=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&r.charCodeAt(0)!==58&&!Kn.get(n))&&!o){Kn.set(e,!0);for(var a=[],l=ai(r,a),u=n.props,p=0,y=0;p<l.length;p++)for(var i=0;i<u.length;i++,y++)e.props[y]=a[p]?l[p].replace(/&\f/g,u[i]):u[i]+" "+l[p]}}},di=function(e){if(e.type==="decl"){var r=e.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(e.return="",e.value="")}};function Hn(t,e){switch(gr(t,e)){case 5103:return _+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return _+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return _+t+Ne+t+H+t+t;case 6828:case 4268:return _+t+H+t+t;case 6165:return _+t+H+"flex-"+t+t;case 5187:return _+t+M(t,/(\w+).+(:[^]+)/,_+"box-$1$2"+H+"flex-$1$2")+t;case 5443:return _+t+H+"flex-item-"+M(t,/flex-|-self/,"")+t;case 4675:return _+t+H+"flex-line-pack"+M(t,/align-content|flex-|-self/,"")+t;case 5548:return _+t+H+M(t,"shrink","negative")+t;case 5292:return _+t+H+M(t,"basis","preferred-size")+t;case 6060:return _+"box-"+M(t,"-grow","")+_+t+H+M(t,"grow","positive")+t;case 4554:return _+M(t,/([^-])(transform)/g,"$1"+_+"$2")+t;case 6187:return M(M(M(t,/(zoom-|grab)/,_+"$1"),/(image-set)/,_+"$1"),t,"")+t;case 5495:case 3959:return M(t,/(image-set\([^]*)/,_+"$1$`$1");case 4968:return M(M(t,/(.+:)(flex-)?(.*)/,_+"box-pack:$3"+H+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+_+t+t;case 4095:case 3583:case 4068:case 2532:return M(t,/(.+)-inline(.+)/,_+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Et(t)-1-e>6)switch(ie(t,e+1)){case 109:if(ie(t,e+4)!==45)break;case 102:return M(t,/(.+:)(.+)-([^]+)/,"$1"+_+"$2-$3$1"+Ne+(ie(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~St(t,"stretch")?Hn(M(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(ie(t,e+1)!==115)break;case 6444:switch(ie(t,Et(t)-3-(~St(t,"!important")&&10))){case 107:return M(t,":",":"+_)+t;case 101:return M(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+_+(ie(t,14)===45?"inline-":"")+"box$3$1"+_+"$2$3$1"+H+"$2box$3")+t}break;case 5936:switch(ie(t,e+11)){case 114:return _+t+H+M(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return _+t+H+M(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return _+t+H+M(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return _+t+H+t+t}return t}var li=function(e,r,n,o){if(e.length>-1&&!e.return)switch(e.type){case ur:e.return=Hn(e.value,e.length);break;case pr:return Pe([ve(e,{value:M(e.value,"@","@"+_)})],o);case lr:if(e.length)return hr(e.props,function(a){switch(fr(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Pe([ve(e,{props:[M(a,/:(read-\w+)/,":"+Ne+"$1")]})],o);case"::placeholder":return Pe([ve(e,{props:[M(a,/:(plac\w+)/,":"+_+"input-$1")]}),ve(e,{props:[M(a,/:(plac\w+)/,":"+Ne+"$1")]}),ve(e,{props:[M(a,/:(plac\w+)/,H+"input-$1")]})],o)}return""})}},ui=[li],Wn=function(e){var r=e.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(b){var w=b.getAttribute("data-emotion");w.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var o=e.stylisPlugins||ui,a={},l,u=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(b){for(var w=b.getAttribute("data-emotion").split(" "),h=1;h<w.length;h++)a[w[h]]=!0;u.push(b)});var p,y=[ci,di];{var i,m=[Er,kr(function(b){i.insert(b)})],d=xr(y.concat(o,m)),s=function(w){return Pe(Sr(w),d)};p=function(w,h,f,v){i=f,s(w?w+"{"+h.styles+"}":h.styles),v&&(c.inserted[h.name]=!0)}}var c={key:r,sheet:new dr({key:r,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:p};return c.sheet.hydrate(u),c};g();var Ce=L(z()),pi=(t=document.body)=>{var o,a;let e=(0,Ce.useRef)(null),r=(0,Ce.useRef)(null),n=(0,Ce.useRef)(null);return(0,Ce.useEffect)(()=>()=>{var l,u;(l=r.current)==null||l.disconnect(),(u=e.current)==null||u.remove()},[]),(e.current===null||t!==n.current)&&((o=r.current)==null||o.disconnect(),(a=e.current)==null||a.remove(),n.current=t,e.current=document.createElement("div"),e.current.setAttribute("data-engagement-toplevel-styles",""),e.current.setAttribute("hidden",""),t.prepend(e.current),r.current=new MutationObserver(()=>{e.current&&e.current.querySelectorAll("style[data-emotion]:not([data-s])").forEach(l=>{l.setAttribute("data-s","")})}),r.current.observe(e.current,{childList:!0,subtree:!0})),e.current},zn=pi;g();var Ue=L(z());var mi=({nudgeActor:t})=>{var y;let e=F(),r=Ee(t,({context:i})=>i.nudge),n=Ee(t,({context:i})=>i.stepIndex),{animStyles:o}=Xe(),a=ge(r,n);if(!a||!(Ye(a)&&a.formFactor.isShowingMask))return null;let{targetElement:l}=gn(e,{step:a}),u=(y=l==null?void 0:l.getBoundingClientRect())!=null?y:new DOMRect,p=l?getComputedStyle(l).borderRadius:"0px";return u.width===0||u.height===0?null:Ue.default.createElement("div",{style:{position:"absolute",top:"0",left:"0",...Oe.getZIndexStyles(a,"mask")}},Ue.default.createElement("div",{"data-testid":"engagement-nudge-mask",style:{width:`${document.documentElement.scrollWidth}px`,height:`${document.documentElement.scrollHeight}px`,clipPath:`polygon(0% 0%, 0% 100%,
                ${u.left+window.scrollX}px 100%,
                ${u.left+window.scrollX}px ${u.top+window.scrollY}px,
                ${u.left+window.scrollX+u.width}px ${u.top+window.scrollY}px,
                ${u.left+window.scrollX+u.width}px ${u.top+window.scrollY+u.height}px,
                0% ${u.top+window.scrollY+u.height}px,
                0% 100%, 100% 100%, 100% 0%)`,position:"absolute"}}),Ue.default.createElement("div",{"data-testid":"engagement-nudge-mask-inner",style:{pointerEvents:"none",position:"absolute",inset:`${u.top+window.scrollY}px ${u.left+window.scrollX}px`,width:`${u.width}px`,height:`${u.height}px`,padding:"4px",borderRadius:`${p}`,boxShadow:`0 0 0 ${Math.max(document.documentElement.scrollHeight,document.documentElement.scrollWidth)}px rgba(0, 0, 0, 0.1)`,overflow:"hidden",opacity:o.opacity,transitionProperty:"opacity",transitionDuration:o.transitionDuration,transitionTimingFunction:o.transitionTimingFunction}}))},Vn=({nudgesManager:t})=>{let e=F(),r=Ee(t,o=>o.context.activeNudge);if(!r)return null;let n=G(e,r==null?void 0:r.variantId);return n?Ue.default.createElement(mi,{nudgeActor:n}):null};g();var jn=t=>{if(t.themeOverride&&t.themeOverride.theme&&t.themeOverride.mode)return t.themeOverride;let e=t.themeMode==="auto"?t.services.getDefaultUIMode():t.themeMode;return{theme:Ar(t.themes),mode:e}};g();var re=L(z()),et=L(z());var de={state:{},subscribers:[],subscribe:t=>(de.subscribers.push(t),()=>{de.subscribers=de.subscribers.filter(e=>e!==t)})},gi=(t,e)=>{switch(e.type){case"SHOW":return{...t,[e.id]:e.payload};case"HIDE":{let r={...t};return delete r[e.id],r}case"HIDE_ALL_MATCHING_PATTERN":if(e.idPattern){let r={...t};for(let n in r)n.match(e.idPattern)&&delete r[n];return r}return{};default:return t}},$t=t=>{let e=gi(de.state,t);de.state=e,de.subscribers.forEach(r=>r(e))},qn=(t,e)=>{$t({type:"SHOW",id:t,payload:e})},Gn=t=>{$t({type:"HIDE_ALL_MATCHING_PATTERN",idPattern:t})},Kt=t=>{let e=document.querySelector(`[data-spacer-for="${t}"]`);e&&e.remove(),$t({type:"HIDE",id:t})},Yn=({children:t})=>{let{isEditorPreview:e}=F(),[r,n]=(0,et.useState)(de.state);return(0,et.useEffect)(()=>de.subscribe(n),[]),re.default.createElement(re.default.Fragment,null,t,re.default.createElement("div",{id:"engagement-nudges-banner-sticky-container",style:{width:"100%",top:"0px",left:0,position:"fixed",pointerEvents:"none",height:"100%"}},Object.entries(r).filter(([,o])=>o.sticky).map(([o,a])=>re.default.createElement("div",{key:o,id:o},a.element))),re.default.createElement("div",{id:"engagement-nudges-banner-inline-container-top",style:{width:"100%",position:"absolute",top:"0",left:0,pointerEvents:"none"}},Object.entries(r).filter(([,o])=>!o.sticky&&o.position==="top").map(([o,a])=>re.default.createElement("div",{key:o,id:o},a.element))),re.default.createElement("div",{id:"engagement-nudges-banner-inline-container-bottom",style:{width:"100%",position:e?void 0:"relative",pointerEvents:"none"}},Object.entries(r).filter(([,o])=>!o.sticky&&o.position==="bottom").map(([o,a])=>re.default.createElement("div",{key:o,id:o},a.element))))};g();var Jn=L(oi()),he=L(z());g();var K=L(z());var fi=j.div`
  height: ${Bt}px;
  position: relative;
  z-index: 50;

  @media screen and (max-height: 820px) {
    transform: scale(0.9);
  }

  @media screen and (max-height: 720px) {
    transform: scale(0.8);
  }

  @media screen and (max-height: 620px) {
    transform: scale(0.7);
  }

  @media screen and (max-height: 560px) {
    transform: scale(0.6);
  }

  @media screen and (max-height: 500px) {
    transform: scale(0.5);
  }

  @media screen and (max-height: 420px) {
    transform: scale(0.4);
  }
`,hi=j.div`
  width: ${tn}px;
  height: ${Bt}px;
  position: relative;
  border-radius: 56px;
  box-shadow: 0px 0px 0px 7.5px #7d7e7d;
  border: 8px solid #000;
  background: linear-gradient(165deg, white, #ebf0ff 45%, #ebf0ff 55%, white);
  outline: 6px solid #2c2c2b;
  padding-top: 60px;
  padding-bottom: 34px;
  overflow: hidden;

  @media screen and (max-width: 670px) {
    height: 790px;
    width: 400px;
  }

  @media screen and (max-width: 580px) {
    height: 720px;
    width: 360px;
  }

  @media screen and (max-width: 480px) {
    height: 650px;
    width: 320px;
  }

  @media screen and (max-width: 400px) {
    height: 580px;
    width: 280px;
  }

  #engagement-nudge-container {
    overflow: auto;
  }
`,yi=j.div`
  height: 100%;
  width: 100%;
  position: relative;
`,bi=j.div`
  position: absolute;
  width: 100%;
  height: 60px;
  top: 0px;
  display: flex;
  justify-content: center;
  padding-top: 12px;
`,wi=j.div`
  height: 37px;
  width: 126px;
  border-radius: 24px;
  background-color: #000000;
  transition: height 0.5s cubic-bezier(0.075, 0.82, 0.165, 1), width 0.5s cubic-bezier(0.075, 0.82, 0.165, 1);

  &:hover {
    height: 45px;
    width: 145px;
  }
`,vi=j.div`
  position: absolute;
  width: 100%;
  height: 34px;
  bottom: 0px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding-bottom: 8px;
`,Si=j.div`
  height: 5px;
  width: 154px;
  border-radius: 24px;
  background-color: #000000;
`,Ei=j.div`
  position: absolute;
  height: 100%;
  width: 100%;
  top: 0px;
  bottom: 0px;
`,Zn=j.div`
  position: absolute;
  top: 120px;
  display: flex;
  flex-direction: column;

  &.left {
    left: -12px;
  }

  &.right {
    right: -12px;
    top: 220px;
  }
`,tt=j.span`
  background-color: #1d1e1f;
  display: inline-block;
  width: 5px;
  min-height: 62px;
  border-radius: 2px;

  &.power {
    height: 102px;
  }

  &.volume-up {
    margin-top: 29px;
  }
  &.volume-down {
    margin-top: 16px;
  }

  &.lock {
    min-height: 32px;
  }
`,xi=()=>K.default.createElement(Ei,null,K.default.createElement(Zn,{className:"left"},K.default.createElement(tt,{className:"lock"}),K.default.createElement(tt,{className:"volume-up"}),K.default.createElement(tt,{className:"volume-down"})),K.default.createElement(Zn,{className:"right"},K.default.createElement(tt,{className:"power"}))),ki=()=>K.default.createElement(bi,null,K.default.createElement(wi,null)),Xn=({style:t,children:e})=>{let{isMobileDevice:r,isMobileNativePreview:n}=ce();return K.default.createElement(fi,{style:t,"data-testid":"mobile-preview-device"},K.default.createElement(xi,null),K.default.createElement(hi,{isMobileWeb:r&&!n},K.default.createElement(ki,null),K.default.createElement(yi,{id:"engagement-mobile-preview-wrapper"},K.default.createElement("div",{id:"engagement-mobile-nudge-mock-pin"}),e),K.default.createElement(vi,null,K.default.createElement(Si,null))))};var Ci=({children:t})=>{let e=he.default.useRef(null),{widgetTableauSelection:r,editorPreviewDevice:n,isAssistantPreview:o}=F(),{mode:a}=J(),l=he.default.useCallback(y=>{if(!y){e.current&&(e.current.dispose(),e.current=null);return}if(e.current=(0,Jn.default)(y,{maxZoom:1,minZoom:1,initialZoom:1,zoomDoubleClickSpeed:1,smoothScroll:!1,filterKey:function(){return!0}}),e.current.on("pan",function(){document.body.style.cursor="grab",y.style.pointerEvents="none"}),e.current.on("panend",function(){document.body.style.cursor="auto",y.style.removeProperty("pointer-events")}),!!y.children[0])return y.addEventListener("mousedown",u),y.addEventListener("wheel",p),()=>{y.removeEventListener("mousedown",u),y.removeEventListener("wheel",p)}},[r]),u=y=>{var d,s;let i=y.target;(i==null?void 0:i.id)==="panzoom-container"?(d=e.current)==null||d.resume():(s=e.current)==null||s.pause()},p=y=>{var d,s;let i=y.target;(i==null?void 0:i.id)==="panzoom-container"?(d=e.current)==null||d.resume():(s=e.current)==null||s.pause()};return he.default.createElement("div",{style:{position:"absolute",inset:0,overflow:"clip",backgroundColor:o?"var(--monochrome-minus-4)":a==="lightMode"?"#F9F9F9":"#3F424A",backgroundImage:o?void 0:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABZSURBVHgB7dG7DYBADANQJxexAiXSTXw9uyExBih34SOxQhr83Li2ASIiIiIiIvo7QbLW1jms1zijq9puSDaGLxhhuBPaqyKZTFK+/q6AZOJlg8shqv5ccAGZWRnaKiSy9QAAAABJRU5ErkJggg==)"}},he.default.createElement("div",{id:"panzoom-container",style:{width:"100%",height:"100%"},ref:l},t,he.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}},he.default.createElement(Xn,{style:{visibility:n.startsWith("mobile")?"visible":"hidden"}}))))},Qn=Ci;g();var I=L(z()),Ht=L(or());g();var Te=L(z());g();var eo=L(z());var Ti={display:"flex",width:"var(--popover-width)",flexDirection:"column",alignItems:"flex-start",pointerEvents:"all",maxWidth:"var(--tooltip-max-width)",position:"relative",borderRadius:"var(--layout-radius-card)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--border-primary)",background:"var(--background-primary)",boxShadow:"var(--layout-shadow) var(--layout-shadow-color)",a:{color:"var(--content-link)",textDecoration:"none","&:hover":{color:"var(--content-link-hover)",textDecoration:"underline"}}},Ii={minWidth:"var(--popover-width)",width:"unset",maxWidth:"unset"},_i=j.div``,Ai=eo.default.forwardRef(({children:t,title:e,variant:r,theme:n,...o},a)=>Tr(_i,{ref:a,css:[Ti,r==="survey"&&Ii].filter(Boolean),...o},t)),to=Ai;var ro=({nudge:t,step:e,renderMode:r,handleLinkClick:n,stepIndex:o,isVisible:a=!0})=>{var m;let l=F(),u=J(),p=r!==1?G(l,t.variantId):void 0,{isMobileDevice:y}=ce(),i=Te.default.createElement(An,{isDismissible:t.isDismissible,shouldMoveLeft:((m=e.formFactor)==null?void 0:m.contentAlignment)==="end","data-testid":"engagement-nudge-tooltip-close"},Te.default.createElement(En,null));return Te.default.createElement(se,{nudge:t},Te.default.createElement(to,{variant:e.content.find(d=>d.type==="survey_rating")?"survey":"default",key:e.id,theme:u,style:{minHeight:44,pointerEvents:a?"auto":"none",...e.formFactor.layout==="horizontal"&&!y?{width:"auto",maxWidth:"calc(var(--tooltip-max-width) * 2)"}:{}},className:"amplitude-engagement-tooltip-content"},Te.default.createElement(Bn,{nudge:t,step:e,renderMode:r,handleLinkClick:n,stepIndex:o,actor:p,overrides:{close:i}})))};g();var no=L(z());var Mi={bookClosed:hn,helpCircle:yn,helpSquare:bn,infoCircle:wn,lightBulb:vn,lightning:Sn},oo=({type:t,size:e=16})=>{let r=Mi[t];return no.default.createElement(r,{color:"#3F424A",width:e,height:e})};g();var rt=L(z());var io=dn({types:{},guards:{shouldCenter:()=>!1,isInlineAligned:()=>!1},actions:{updatePosition:Lt({marker:({context:t},e)=>({...t.marker,position:e.position})}),assignInlineWrapper:Lt({inlineWrapperElement:(t,e)=>e.inlineWrapperElement}),removeTooltip:()=>{},trackMarkerInView:()=>{},handleHide:()=>{}},actors:{waitForTargetElement:te(()=>{}),trackTargetElement:te(()=>{}),wrapTargetElement:te(()=>{}),trackMarkerInView:te(()=>{})}}).createMachine({id:"Tooltip",initial:"idle",context:({input:t})=>({marker:{ref:t.markerRef,position:null,offset:t.offset,alignment:t.alignment},renderMode:t.renderMode,anchor:t.anchor}),states:{idle:{always:[{target:"centered",guard:"shouldCenter",description:"This is the case when we are editing a step in the studio and the target element is unavailable."},"waiting for target element"]},centered:{type:"final"},anchoring:{initial:"hidden",invoke:{src:"trackTargetElement",id:"trackTargetElement",input:({context:t,event:e})=>({marker:t.marker,targetElement:"targetElement"in e?e.targetElement:null})},states:{shown:{on:{HIDE:{target:"#Tooltip.anchoring.hidden"}},states:{visible:{entry:[{type:"trackMarkerInView"}],on:{OUT_OF_VIEW:"hidden"},exit:[{type:"handleHide"}]},hidden:{on:{IN_VIEW:"visible"}}},initial:"hidden",invoke:{src:"trackMarkerInView",id:"trackMarkerInView",input:({context:t})=>({markerRef:t.marker.ref})}},hidden:{on:{SHOW:"shown"}}},on:{POSITION:{actions:[{type:"updatePosition",params:({event:t})=>({position:t.position})}]},TARGET_ELEMENT_REMOVED:"waiting for target element"}},inlining:{invoke:{src:"wrapTargetElement",id:"wrapTargetElement",input:({context:t,event:e})=>({marker:t.marker,targetElement:"targetElement"in e?e.targetElement:null})},states:{idle:{on:{ASSIGN_WRAPPER:{target:"inlined",actions:[{type:"assignInlineWrapper",params:({event:t})=>({inlineWrapperElement:t.inlineWrapperElement})}]}}},inlined:{states:{hidden:{on:{IN_VIEW:"visible"}},visible:{entry:[{type:"trackMarkerInView"}],on:{OUT_OF_VIEW:"hidden"}}},initial:"hidden",invoke:{src:"trackMarkerInView",id:"trackMarkerInView",input:({context:t})=>({markerRef:t.marker.ref})}}},initial:"idle",on:{TARGET_ELEMENT_REMOVED:"waiting for target element"}},"waiting for target element":{on:{TARGET_ELEMENT_FOUND:[{target:"inlining",guard:"isInlineAligned"},"anchoring"]},invoke:{src:"waitForTargetElement",id:"waitForTargetElement"}}},on:{DESTROY:{actions:[{type:"removeTooltip"}]}}}),W=ln(io),so=({variantId:t,children:e,renderMode:r,offset:n,alignment:o,anchor:a,handleDestroy:l,onMarkerView:u,handleHide:p})=>{let{isEditorPreview:y}=F(),{showWidgetTableau:i,messageBus:m}=F(),d=(0,rt.useRef)(null),s=io.provide({guards:{shouldCenter:({context:c})=>!i&&y||r===1&&!xe(c.anchor),isInlineAligned:()=>o==="inline_left"||o==="inline_right"},actions:{removeTooltip:l,trackMarkerInView:u,handleHide:p},actors:{waitForTargetElement:te(({sendBack:c})=>{let b=xe(a);if(Le(b))return c({type:"TARGET_ELEMENT_FOUND",targetElement:b});let w=()=>{let h=xe(a);Le(h)&&c({type:"TARGET_ELEMENT_FOUND",targetElement:h})};return m.subscribe("dom_mutation",w,`tooltip_wait_for_target_${t}`),()=>{m.unsubscribe("dom_mutation",`tooltip_wait_for_target_${t}`)}}),trackTargetElement:te(({sendBack:c,input:b})=>{let{marker:w,targetElement:h}=b;if(!h)return;let f=w.ref.current;if(!f)return;let{offset:v,alignment:N}=w,R=xn(h,f,()=>{var B,$,oe,ue,Z,pe;Tn(h,f,{placement:N==="left"?"left":"right",strategy:"fixed",middleware:[kn({mainAxis:q(v.x),crossAxis:q(v.y)}),Cn({strategy:"escaped",padding:{top:q((B=v==null?void 0:v.y)!=null?B:"0"),bottom:-q(($=v==null?void 0:v.y)!=null?$:"0"),...N==="left"?{right:-q((oe=v==null?void 0:v.x)!=null?oe:"0"),left:q((ue=v==null?void 0:v.x)!=null?ue:"0")}:{right:q((Z=v==null?void 0:v.x)!=null?Z:"0"),left:-q((pe=v==null?void 0:v.x)!=null?pe:"0")}}})]}).then(({y:mt,x:ye,middlewareData:be})=>{var Ie;c({type:"POSITION",position:{x:ye,y:mt}}),(Ie=be.hide)!=null&&Ie.escaped?c({type:"HIDE"}):c({type:"SHOW"})})});return m.subscribe("dom_mutation",()=>{(!document.contains(h)||!Le(h))&&c({type:"TARGET_ELEMENT_REMOVED"})},`tooltip_check_for_target_removal_${t}`),()=>{R(),m.unsubscribe("dom_mutation",`tooltip_check_for_target_removal_${t}`)}}),wrapTargetElement:te(({sendBack:c,input:b})=>{var v,N;let{marker:w,targetElement:h}=b;if(!h)return;let f=document.createElement("div");return f.setAttribute("data-testid","engagement-nudge-tooltip-wrapper"),f.style.position="relative",f.style.display="inline-flex",f.style.alignItems="baseline",f.style.width="fit-content",f.style.flexDirection=w.alignment==="inline_right"?"row":"row-reverse",(v=h.parentNode)==null||v.insertBefore(f,h),(N=h.parentNode)==null||N.removeChild(h),f.appendChild(h),c({type:"ASSIGN_WRAPPER",inlineWrapperElement:f}),m.subscribe("dom_mutation",()=>{(!document.contains(h)||!Le(h))&&c({type:"TARGET_ELEMENT_REMOVED"})},`tooltip_check_for_target_removal_wrap_${t}`),()=>{let x=f.parentNode;document.contains(x)&&(x==null||x.insertBefore(h,f),x==null||x.removeChild(f)),m.unsubscribe("dom_mutation",`tooltip_check_for_target_removal_wrap_${t}`)}}),trackMarkerInView:te(({sendBack:c,input:b})=>{let w=new IntersectionObserver(([h])=>{h.isIntersecting?c({type:"IN_VIEW"}):c({type:"OUT_OF_VIEW"})});return b.markerRef.current&&w.observe(b.markerRef.current),()=>{w.disconnect()}})}});return rt.default.createElement(W.Provider,{logic:s,options:{input:{markerRef:d,offset:n,alignment:o,renderMode:r,anchor:a}}},e)};var Ni=({source:t,width:e})=>{let r=t.startsWith("<svg"),n=(0,I.useRef)(null),o={pointerEvents:"auto",...e!=null&&{width:e,height:e}},a={width:e!=null?"100%":"auto",height:e!=null?"100%":"auto",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"};return(0,I.useEffect)(()=>{if(r&&n.current){let l=n.current.querySelector("svg");l&&(e!=null?(l.style.width="100%",l.style.height="100%",l.style.maxWidth="100%",l.style.maxHeight="100%"):(l.style.width="auto",l.style.height="auto",l.style.maxWidth="none",l.style.maxHeight="none"))}},[r,t,e]),I.default.createElement("div",{style:o,className:"amplitude-engagement-tooltip-marker__image"},r?I.default.createElement("div",{ref:n,dangerouslySetInnerHTML:{__html:t},style:a,className:"svg-wrapper"}):I.default.createElement("img",{alt:"Tooltip marker",src:t,style:{width:e!=null?"100%":"auto",height:e!=null?"100%":"auto",objectFit:"contain"}}))},Pi=({type:t,width:e})=>I.default.createElement("div",{className:"amplitude-engagement-tooltip-marker__icon","data-testid":"engagement-nudge-tooltip-icon",style:{border:"none",display:"flex",background:"none",padding:0,position:"relative",pointerEvents:"auto"}},I.default.createElement(oo,{type:t,size:e!=null?e:void 0})),Oi=({marker:t,className:e})=>{let r=J(),{isMobileNativePreview:n}=ce();switch(t.type){case"image":return t.source?I.default.createElement(Ni,{source:t.source,width:n?16:t.width}):null;case"icon":return I.default.createElement(Pi,{type:t.icon,width:t.width});case"beacon":return I.default.createElement(Pn,{theme:r,className:"amplitude-engagement-tooltip-marker__beacon"});default:return null}},Ri=({step:t})=>{let{isMobileDevice:e}=ce(),r=W.useSelector(c=>c.matches({anchoring:"shown"})||c.matches("centered")),n=W.useSelector(({context:c})=>c.marker.alignment),o=n==="inline_left"||n==="left",a={visibility:r?"visible":"hidden",top:"calc(40vh - 51px)",right:`calc(-${e?o?40:60:o?20:80}vw + 24px)`},l=W.useSelector(({context:c})=>{var b;return(b=c.marker.position)==null?void 0:b.y}),u=W.useSelector(({context:c})=>{var b;return(b=c.marker.position)==null?void 0:b.x}),p={visibility:r?"visible":"hidden",left:u,top:l},y={visibility:"visible"},i=W.useSelector(c=>c.matches({inlining:"inlined"})&&!!c.context.inlineWrapperElement),m=W.useSelector(c=>c.matches("centered")),d=()=>i?y:m?a:p,s=W.useSelector(({context:c})=>c.marker.ref);return I.default.createElement(In,{ref:s,"data-testid":"engagement-nudge-tooltip-marker",style:{...d()}},I.default.createElement(Oi,{marker:t.formFactor.marker,className:"amplitude-engagement-tooltip-marker"}))},Bi=({nudge:t,step:e,popoverActor:r})=>{var s,c,b;let n=Ee(r,w=>w.matches("open")),{onExit:o}=Xe(),{isStudioMobilePreview:a}=ce(),l=F(),u=W.useSelector(({context:w})=>w.renderMode),p=u!==1?G(l,t.variantId):void 0,y=(c=(s=p==null?void 0:p.getSnapshot())==null?void 0:s.context.stepIndex)!=null?c:0,i=(0,I.useCallback)(()=>o(()=>{var w,h;return(h=(w=p==null?void 0:p.getSnapshot())==null?void 0:w.context.popoverActor)==null?void 0:h.send({type:"CLOSE"})}),[p==null?void 0:p.getSnapshot,o]),m=On(w=>Re.nudge.engaged(t,y,{...p==null?void 0:p.getSnapshot().context,source:{type:"link",url:w},interactionState:ee(l,t.variantId)}),i),d=W.useSelector(w=>w.matches({inlining:"inlined"})&&!!w.context.inlineWrapperElement);return(0,I.useEffect)(()=>{p==null||p.send({type:"ASSIGN_POPOVER_ACTOR",actor:r})},[r,p]),(0,I.useEffect)(()=>{u===1&&r.send({type:"OPEN"})},[u,e]),I.default.createElement(I.default.Fragment,null,I.default.createElement(Ri,{step:e}),I.default.createElement(_n,{"data-testid":"engagement-nudge-tooltip-content",describedBy:"engagement-nudge-tooltip-content",labelledBy:"engagement-nudge-title",portalToId:a?"engagement-mobile-preview-wrapper":d?"engagement-toast-container":void 0,shouldStealFocus:u!==1,showArrow:((b=e.formFactor.pointer)==null?void 0:b.type)==="arrow",style:{borderRadius:"var(--layout-radius-card)",...Oe.getZIndexStyles(e)}},I.default.createElement(Rn,{actor:p,step:e},I.default.createElement(Nn,null,I.default.createElement(ro,{nudge:t,step:e,renderMode:u,stepIndex:y,handleLinkClick:m,isVisible:n})))))},Di=({nudge:t,step:e,onOpen:r,forceOpen:n=!1,autoPlacement:o=!0,root:a})=>{let l=W.useSelector(({context:w})=>w.renderMode),u=W.useSelector(w=>w.matches("idle")),p=W.useSelector(w=>w.matches({inlining:"inlined"})&&!!w.context.inlineWrapperElement),y=W.useSelector(({context:w})=>w.inlineWrapperElement),i=W.useSelector(({context:w})=>w.marker.offset),{generatedCSSClassname:m}=J();if(u)return null;let[d,s]=[q(i.x),q(i.y)],c=p?{display:"flex",position:"relative",[e.formFactor.marker.positioning.position==="inline_left"?"marginRight":"marginLeft"]:`${d}px`,marginTop:`${s}px`,zIndex:"auto"}:{...Oe.getZIndexStyles(e)};if(!a)return null;let b=(0,Ht.createPortal)(I.default.createElement(Mn,{"data-testid":`engagement-tooltip-${t.variantId}-${String(e.id)}${l===1?"-mock":""}`,forceOpen:n,defaultOpen:l===1,triggerType:e.formFactor.showOn,style:c,className:m,autoPlacement:o,onOpen:r},w=>I.default.createElement(Bi,{nudge:t,step:e,popoverActor:w})),a);return p&&y?(0,Ht.createPortal)(b,y):b},ao=({nudge:t,step:e,renderMode:r,forceOpen:n,anchorOverride:o,onMarkerView:a,onOpen:l,handleDestroy:u,autoPlacement:p})=>{var m;let y=F(),i=(0,I.useRef)(document.getElementById("engagement-tooltip-container-portal"));return i.current?I.default.createElement(se,{nudge:t},I.default.createElement(fn,{widget:"tooltip",keepMounted:!0,isOpenByDefault:r===1},I.default.createElement(so,{variantId:t.variantId,offset:e.formFactor.marker.positioning.offset,renderMode:r,alignment:e.formFactor.marker.positioning.position,anchor:(m=o!=null?o:e.formFactor.anchorSelector)!=null?m:e.formFactor.anchor,handleDestroy:u,onMarkerView:a,handleHide:()=>{var c;let d=G(y,t.variantId),s=(c=d==null?void 0:d.getSnapshot())==null?void 0:c.context.popoverActor;s==null||s.send({type:"CLOSE"})}},I.default.createElement(Di,{onOpen:l,autoPlacement:p,forceOpen:n,nudge:t,step:e,root:i.current})))):null};var Ui=S.default.lazy(()=>import("./f74c6542d07f56fcb969d3e70fbf25eeb9336887-Checklist-BBMYNYNN.js")),Fi=S.default.lazy(()=>import("./f74c6542d07f56fcb969d3e70fbf25eeb9336887-Nudges-AOAWQHPS.js")),$i=S.default.lazy(()=>import("./f74c6542d07f56fcb969d3e70fbf25eeb9336887-WidgetTableau-NO5W7FD7.js")),Ki=S.default.lazy(()=>import("./f74c6542d07f56fcb969d3e70fbf25eeb9336887-ResourceCenterRoot-AE5VC5CZ.js")),Hi=()=>{let t=F(),{generatedCSSClassname:e}=J(),r=()=>S.default.createElement(S.default.Fragment,null,S.default.createElement(S.Suspense,{fallback:null},S.default.createElement(Fi,null)),t.nudgesManager&&S.default.createElement(Vn,{nudgesManager:t.nudgesManager}),S.default.createElement(cn,{containerStyle:{marginTop:t.isEditorPreview?"51px":void 0}}),S.default.createElement("div",{id:"engagement-tooltip-container-portal"}),S.default.createElement(Yn,null)),n=()=>S.default.createElement(S.Suspense,{fallback:null},S.default.createElement(Ui,null)),o=a=>{var l,u;return t.resourceCenter?S.default.createElement(S.Suspense,{fallback:null},S.default.createElement(Ki,{isEnabled:!!t.resourceCenter.key&&!!((u=(l=t.decide)==null?void 0:l[t.resourceCenter.key])!=null&&u.value),isPreviewPane:a,isVisible:t.resourceCenter.visible,launcher:t.resourceCenter.desktopLauncher})):null};return S.default.createElement("div",{className:e,id:"engagement-theme-root",dir:"ltr"},t.showWidgetTableau?S.default.createElement(S.Suspense,{fallback:null},S.default.createElement($i,null)):t.isEditorPreview?S.default.createElement(Qn,null,n(),r(),o(!0)):S.default.createElement(S.default.Fragment,null,n(),r(),o(!1)))},Wi=({children:t})=>{var u,p,y;let e=F(),{organization:r}=e,n=(0,S.useRef)(!!e.user),o=document.getElementById("engagement-wrapper"),a=zn(o!=null?o:document.head),l=(0,S.useMemo)(()=>{var d,s;let i=me(),m=c=>{if(c.type!=="rule")return;let b="#engagement-wrapper";Array.isArray(c.props)?c.props=c.props.map(w=>w&&w.includes(".")?`${b} ${w}`:w):typeof c.props=="string"&&c.props.includes(".")&&(c.props=`${b} ${c.props}`)};return Wn({key:"engagement-toplevel",container:a,speedy:!((d=e.flags)!=null&&d["support-ruby-on-rails"]),nonce:(s=i[O])==null?void 0:s.nonce,stylisPlugins:[m]})},[a,(u=e.flags)==null?void 0:u["support-ruby-on-rails"]]);return(0,S.useEffect)(()=>{$n.setOrganization(r)},[r]),S.default.useEffect(()=>{e.user&&(e.services.postMessageToDashboard("ENGAGEMENT_BOOTED"),n.current||(n.current=!0))},[(p=e.user)==null?void 0:p.device_id,(y=e.user)==null?void 0:y.user_id,r]),S.default.useEffect(()=>{let i=setTimeout(()=>{n.current||E.warn("\u{1F44B} Guides and Surveys are almost ready. You just need to call `boot()` to make them available in your app.")},15e3);return()=>clearTimeout(i)},[]),S.default.createElement(S.default.Fragment,null,S.default.createElement(Cr,{value:l},e.user?S.default.createElement(Hi,null):null,t))},zi=t=>{let e=F(),r=jn(e),n={container:document.getElementById("engagement-container"),root:document};return S.default.createElement(_r.Provider,{value:n},S.default.createElement(Mr,{theme:r.theme,mode:r.mode},S.default.createElement(Wi,{...t})))},co=zi;var lo=t=>nt.default.createElement(ar,null,nt.default.createElement(cr,{store:t.store},nt.default.createElement(co,null,t.children)));g();g();var ot=(t,e)=>{let r={};return Object.keys(e).forEach(n=>{r[n]=e[n].bind(null,t)}),r};var Wt={};ni(Wt,{previewAutopilotKeywords:()=>go,previewContentItem:()=>fo,previewRecSet:()=>po,previewResourceCenter:()=>mo,setCurrentChatSession:()=>yo,setInitialPage:()=>ho,showResourceCenter:()=>uo});g();g();var uo=(t,e)=>{t.services.showResourceCenter(t,e)},po=(t,e)=>{t.services.previewRecSet(t,e)},mo=(t,e,r)=>{t.services.previewResourceCenter(t,e,r)},go=(t,e)=>{t.services.previewAutopilotKeywords(t,e)},fo=(t,e)=>{t.services.setCurrentContentId(t,e)},ho=(t,e)=>{t.resourceCenter.initialPage=e},yo=(t,e,r,n=!1)=>{t.resourceCenter.currentChatSession={sessionId:e,messages:r,isReviewMode:n}};g();var Vi=t=>{var e,r,n,o;return typeof window>"u"||typeof document>"u"?t:{...t,event_properties:{...t.event_properties,"[Guides-Surveys] Page":{domain:(e=window.location)==null?void 0:e.hostname,hash:(r=window.location)==null?void 0:r.hash,path:(n=window.location)==null?void 0:n.pathname,query:(o=window.location)==null?void 0:o.search,title:document.title}}}},ji=t=>({...t,event_properties:{...t.event_properties,"[Guides-Surveys] Version":"1"}}),qi=t=>(t=ji(t),t=Vi(t),t),it=class{constructor(e){U(this,"hasBooted",!1);U(this,"integrations");this.integrations=e}trackEvent(e,r={}){this.track(e,r)}track(e,r={}){var o,a;let n={event_type:e,event_properties:r};if(!this.hasBooted){E.warn("Events cannot be tracked before `boot` is called");return}try{let l=qi(n);E.debug("Tracking event",JSON.stringify(l,null,2));try{this.integrations().forEach(u=>{var p;(p=u.track)==null||p.call(u,{event_type:l.event_type,event_properties:l.event_properties})})}catch(u){(o=Q())==null||o.captureException(u)}}catch(l){E.error("Unexpected error logging event; ignoring",{error:l}),(a=Q())==null||a.captureException(l)}}setBootStatus(e){this.hasBooted=e}};g();var Gi=function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:Yi(),platform:"Web",os:void 0,deviceModel:void 0}},t}(),Yi=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},Zi=function(){function t(){this.queue=[]}return t.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},t.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(r){e(r)}),this.queue=[])},t}(),le=function(){return le=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},le.apply(this,arguments)};function st(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bo(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,a=[],l;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(u){l={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a}var at=function(t,e){var r,n,o=["string","number","boolean","undefined"],a=typeof t,l=typeof e;if(a!==l)return!1;try{for(var u=st(o),p=u.next();!p.done;p=u.next()){var y=p.value;if(y===a)return t===e}}catch(w){r={error:w}}finally{try{p&&!p.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;var i=Array.isArray(t),m=Array.isArray(e);if(i!==m)return!1;if(i&&m){for(var d=0;d<t.length;d++)if(!at(t[d],e[d]))return!1}else{var s=Object.keys(t).sort(),c=Object.keys(e).sort();if(!at(s,c))return!1;var b=!0;return Object.keys(t).forEach(function(w){at(t[w],e[w])||(b=!1)}),b}return!0},Xi="$set",Ji="$unset",Qi="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),r=e.length,n=new Array(r);r--;)n[r]=[e[r],t[e[r]]];return n});var es=function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var e=this,r=le({},this.identity.userProperties),n=le(le({},this.identity),{userProperties:r});return{setUserId:function(o){return n.userId=o,this},setDeviceId:function(o){return n.deviceId=o,this},setUserProperties:function(o){return n.userProperties=o,this},setOptOut:function(o){return n.optOut=o,this},updateUserProperties:function(o){var a,l,u,p,y,i,m=n.userProperties||{};try{for(var d=st(Object.entries(o)),s=d.next();!s.done;s=d.next()){var c=bo(s.value,2),b=c[0],w=c[1];switch(b){case Xi:try{for(var h=(u=void 0,st(Object.entries(w))),f=h.next();!f.done;f=h.next()){var v=bo(f.value,2),N=v[0],x=v[1];m[N]=x}}catch($){u={error:$}}finally{try{f&&!f.done&&(p=h.return)&&p.call(h)}finally{if(u)throw u.error}}break;case Ji:try{for(var R=(y=void 0,st(Object.keys(w))),B=R.next();!B.done;B=R.next()){var N=B.value;delete m[N]}}catch($){y={error:$}}finally{try{B&&!B.done&&(i=R.return)&&i.call(R)}finally{if(y)throw y.error}}break;case Qi:m={};break}}}catch($){a={error:$}}finally{try{s&&!s.done&&(l=d.return)&&l.call(d)}finally{if(a)throw a.error}}return n.userProperties=m,this},commit:function(){return e.setIdentity(n),this}}},t.prototype.getIdentity=function(){return le({},this.identity)},t.prototype.setIdentity=function(e){var r=le({},this.identity);this.identity=le({},e),at(r,this.identity)||this.listeners.forEach(function(n){n(e)})},t.prototype.addIdentityListener=function(e){this.listeners.add(e)},t.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},t}(),$e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:self,ct=function(){function t(){this.identityStore=new es,this.eventBridge=new Zi,this.applicationContextProvider=new Gi}return t.getInstance=function(e){return $e.analyticsConnectorInstances||($e.analyticsConnectorInstances={}),$e.analyticsConnectorInstances[e]||($e.analyticsConnectorInstances[e]=new t),$e.analyticsConnectorInstances[e]},t}();g();var dt=["boot"],wo=["boot"],zt="$default_instance";function vo(t){var o,a,l,u,p,y,i,m;let e=window.engagement,r={_q:(o=e==null?void 0:e._q)!=null?o:[],_configuration:{apiKey:(l=(a=e==null?void 0:e._configuration)==null?void 0:a.apiKey)!=null?l:"",serverUrl:(u=e==null?void 0:e._configuration)==null?void 0:u.serverUrl,chatUrl:(p=e==null?void 0:e._configuration)==null?void 0:p.chatUrl,serverZone:(i=(y=e==null?void 0:e._configuration)==null?void 0:y.serverZone)!=null?i:"US",options:{...(m=e==null?void 0:e._configuration)==null?void 0:m.options}},_sentry:void 0,init(d,s){var f,v,N;if(r._configuration.apiKey){console.log("Engagement SDK has already been initialized. Ignoring additional init call.");return}r._configuration={...r._configuration,...s,apiKey:d,options:{splitting:!0,...r._configuration.options,...s==null?void 0:s.options}},(v=(f=r._configuration)==null?void 0:f.options)!=null&&v.logger&&r._configuration.options.logger.enable((N=r._configuration.options.logLevel)!=null?N:2);let c;if(s!=null&&s.cdnUrl)r._configuration.options.splitting?c=`${s.cdnUrl}/engagement-browser/prod/split/index.js`:c=s.cdnUrl+"/engagement-browser/prod/index.min.js.gz";else{let x=r._configuration.serverZone==="EU"?"https://cdn.eu.amplitude.com":"https://cdn.amplitude.com";r._configuration.options.splitting?c=`${x}/engagement-browser/prod/split/index.js`:c=`${x}/engagement-browser/prod/index.min.js.gz`}let b=null,w=()=>{if(b&&(clearTimeout(b),b=null),r._q&&r._q.length>0)for(console.warn(`Engagement SDK failed to load within ${h}ms. Resolving pending calls gracefully.`);r._q.length>0;){let x=r._q.shift();if(!x)continue;let R=x[0];if(dt.includes(R)&&x[1]instanceof Function&&x[2]instanceof Function){let B=x[1];console.warn(`Engagement SDK method '${R}' resolved as no-op due to script loading failure`),B(void 0)}}};t(c,r._configuration.options.splitting?"module":void 0,s==null?void 0:s.nonce,w);let h=1e4;b=setTimeout(()=>{w()},h)},plugin(d){let s=r.init;return{name:"@amplitude/engagement-browser",type:"enrichment",async setup(c,b){var v,N;let w=(v=c.instanceName)!=null?v:zt,h=ct.getInstance(w).identityStore;s(c.apiKey,{serverZone:c.serverZone,serverUrl:(N=c.serverUrl)!=null&&N.includes("amplitude.com")?void 0:c.serverUrl,...d,options:{logLevel:c.logLevel,logger:c.loggerProvider,...d==null?void 0:d.options}});let f=[{track:x=>{b.track(x)}}];await window.engagement.boot({user:()=>{let x=h.getIdentity();return{user_id:b.getUserId(),device_id:b.getDeviceId(),user_properties:x.userProperties,getSessionId:b.getSessionId}},integrations:f}),h.addIdentityListener(x=>{var R,B,$,oe;(((B=(R=window.engagement)==null?void 0:R._.user)==null?void 0:B.user_id)!==x.userId||((oe=($=window.engagement)==null?void 0:$._.user)==null?void 0:oe.device_id)!==x.deviceId)&&window.engagement.boot({user:()=>{let ue=h.getIdentity();return{user_id:b.getUserId(),device_id:b.getDeviceId(),user_properties:ue.userProperties,getSessionId:b.getSessionId}},integrations:f}),window.engagement._setUserProperties(x.userProperties)})},async execute(c){return window.engagement.forwardEvent(c),c}}}},n=r;return new Proxy(r,{get:function(d,s){if(s in n)return n[s];if(s!=="then")return s==="gs"||s==="rc"?new Proxy({},{get:function(c,b){return function(){let w=Array.from(arguments),h=`${s}.${b}`;w.unshift(h),r._q.push(w)}}}):dt.includes(s)?function(){let c=Array.prototype.slice.call(arguments);return new Promise((b,w)=>{c.unshift(s,b,w),r._q.push(c)})}:function(){let c=Array.prototype.slice.call(arguments);c.unshift(s),r._q.push(c)}}})}var ts=["reloadOrganization","reloadNudges","reloadThemes"],rs={},lt=class{constructor(e,r){U(this,"_");U(this,"nudgeActions");U(this,"resourceCenterActions");U(this,"globalActions");U(this,"_analytics",new it(()=>this._.integrations));U(this,"_configuration",{serverZone:"US",serverUrl:void 0,apiKey:"",options:{...rs}});U(this,"_initStarted",!1);U(this,"_isProxy",!1);U(this,"_fingerprint");U(this,"_sentry");U(this,"transformForHeadless",e=>e.map(r=>{var o,a,l,u,p,y,i,m,d,s,c;let n=JSON.parse(JSON.stringify(r));return(o=n.lifecycleConfig)!=null&&o.conditions&&delete n.lifecycleConfig.conditions,(a=n.pageTargeting)!=null&&a.conditions&&delete n.pageTargeting.conditions,(l=n.temporarilyHideTargeting)!=null&&l.conditions&&delete n.temporarilyHideTargeting.conditions,(p=(u=n.lifeCycleState)==null?void 0:u.checks)!=null&&p.sessionProperties&&delete n.lifeCycleState.checks.sessionProperties,(s=(d=(m=(i=(y=n.lifeCycleState)==null?void 0:y.checks)==null?void 0:i.limits)==null?void 0:m.detail)==null?void 0:d.limits)!=null&&s.conditions&&delete n.lifeCycleState.checks.limits.detail.limits.conditions,((c=n.lifeCycleState)==null?void 0:c.willRenderIfTriggered)!==void 0&&(n.lifeCycleState.passesAllChecks=n.lifeCycleState.willRenderIfTriggered,delete n.lifeCycleState.willRenderIfTriggered),n}));U(this,"gs",{reset:(e,r)=>{let n=Nt(this._,e);if(!n){E.warn(`gs.reset: Guide or survey with flagKey: ${e} not found`);return}this.nudgeActions.resetNudge(n==null?void 0:n.variantId,{step:r})},getAllGuidesAndSurveys:(e,r=[])=>{var a;let n=ae(this._);if(!n)return[];let o=[];for(let l of n.values()){let u=l.getSnapshot().context.nudge,p=ee(this._,u.variantId),y=l.getSnapshot().matches({Step:"Render Loop"}),i=!!(p!=null&&p.activelifeCycleUuid),m=Xr(this._,u,r),d={activelifeCycleUuid:(p==null?void 0:p.activelifeCycleUuid)||"",currentStep:(p==null?void 0:p.currentStep)||0,isCompleted:(p==null?void 0:p.isCompleted)||!1,isDismissed:(p==null?void 0:p.isDismissed)||!1,isChecklistExpanded:(a=p==null?void 0:p.isChecklistExpanded)!=null?a:!0,steps:(p==null?void 0:p.steps)||{},shouldShow:y||i,checks:(m==null?void 0:m.checks)||{},willRenderIfTriggered:(m==null?void 0:m.willRenderIfTriggered)||!1};e!=null&&e.onlyEligible&&!d.willRenderIfTriggered||e!=null&&e.variantIds&&!e.variantIds.includes(u.variantId)||o.push({...u,lifeCycleState:d})}return this.transformForHeadless(o)},getPreviewGuideOrSurvey:async e=>{var a,l;let r=(a=me())==null?void 0:a[O],n=await qr(r==null?void 0:r.apiKey);n!=null&&n.nudges&&await((l=me())==null?void 0:l._reloadNudges(n));let o=this.gs.getAllGuidesAndSurveys({variantIds:[e]},["userTargeting"])[0];return o.lifeCycleState.checks.userTargeting={result:"PASS",explanation:"User targeting always passes in preview mode",detail:{userTargeting:o.flagKey}},o.lifeCycleState.willRenderIfTriggered=Object.values(o.lifeCycleState.checks).every(({result:u})=>u==="PASS"),o},list:()=>{let e=[],r=ae(this._);if(!r)return e;for(let n of r.values()){let o=n.getSnapshot().context.nudge,a=ee(this._,o.variantId),l=n.getSnapshot().matches({Step:"Render Loop"});!(a!=null&&a.activelifeCycleUuid)&&!l||e.push({id:o.variantId,step:a==null?void 0:a.currentStep,title:o.title,status:l?"visible":"active",key:o.flagKey})}return e},show:(e,r=0)=>{let n=Nt(this._,e);n?(this.nudgeActions.closeAllNudgeMocks(),this.nudgeActions.forceTriggerSingleNudge(n,{source:{type:"sdk"},overrides:{stepIndex:r}})):E.error(`triggerNudge: Nudge with key: ${e} not found`)},closeAll:()=>{var e;(e=ae(this._))==null||e.forEach(r=>{r==null||r.send({type:"DISMISS"})})}});U(this,"rc",{open:()=>{this.resourceCenterActions.showResourceCenter(!0)},close:()=>{this.resourceCenterActions.showResourceCenter(!1)},toggle:()=>{this.resourceCenterActions.showResourceCenter(!this._.resourceCenter.visible)}});var n,o;this._=e,this.nudgeActions=ot(e,Ze),this.resourceCenterActions=ot(e,Wt),this.globalActions=ot(e,Vr),this.setRouter=this.setRouter.bind(this),this.boot=this.boot.bind(this),this._startNudgeDebug=this._startNudgeDebug.bind(this),this.forwardEvent=this.forwardEvent.bind(this),this.addIntegration=this.addIntegration.bind(this),this.setThemeMode=this.setThemeMode.bind(this),this.addCallback=this.addCallback.bind(this),this.setSessionProperty=this.setSessionProperty.bind(this),this._initStarted=((n=window.engagement)==null?void 0:n._initStarted)===!0,this._configuration={...this._configuration,...r,options:{...this._configuration.options,...r.options}},this._configuration.options.logger&&this._configuration.options.logger.enable((o=this._configuration.options.logLevel)!=null?o:2),this._sentry=Nr("https://86e449af9e7145de4804c2143988499b@o13027.ingest.us.sentry.io/4508580659462144")}init(e,r){var n;if(this._configuration.apiKey){E.warn("Engagement SDK has already been initialized. Ignoring additional init call.");return}this._configuration={...this._configuration,apiKey:e,...r,options:{...this._configuration.options,...r==null?void 0:r.options}},this._configuration.options.logger&&this._configuration.options.logger.enable((n=this._configuration.options.logLevel)!=null?n:2)}plugin(e){return{name:"@amplitude/engagement-browser",type:"enrichment",setup:async(o,a)=>{var p;let l=(p=o.instanceName)!=null?p:zt,u=ct.getInstance(l).identityStore;await this.boot({user:()=>{let y=u.getIdentity();return{user_id:a.getUserId(),device_id:a.getDeviceId(),user_properties:y.userProperties,getSessionId:a.getSessionId}},integrations:[{track:y=>{a.track(y)}}]}),u.addIdentityListener(y=>{this._setUserProperties(y.userProperties)})},execute:async o=>(this.forwardEvent(o),o)}}setRouter(e){this.globalActions.addCallbacks({"engagement-router":e})}async updateLanguage(e){var o;this._configuration&&(this._configuration.locale=e);let n=(await fe(this._configuration.apiKey)).nudges;(o=ae(this._))==null||o.forEach(a=>{let l=n.find(u=>u.variantId===a.getSnapshot().context.nudge.variantId);l&&(a==null||a.send({type:"REFRESH_NUDGE",nudge:l}))})}async decide(){if(!this._.user){E.error("User must be set before calling decide");return}if(!this._configuration.apiKey){E.error("API key must be set before calling decide");return}return this._.decide=await jr.decide(this._configuration.apiKey,this._.user,this._.isEditorPreview),this._.decide}async boot(e){var r,n,o,a;if(typeof e.user=="function")try{this._.user=e.user()}catch(l){E.error("Failed to get user from provider function",l)}else typeof e=="string"?this._.user={user_id:e}:typeof e.user=="string"?this._.user={user_id:e.user}:this._.user=e.user;if(!this._.user||!this._.user.user_id&&!this._.user.device_id){E.error("User must specify at least a user_id or device_id"),this._.user=void 0;return}this._.user=this._.services.enrichUser(this._.user),this._.integrations=[],(r=e.integrations)==null||r.forEach(l=>{this.addIntegration(l)}),E.log("booting...",JSON.stringify(this._.user,null,2));try{await this.decide(),E.debug("Decide data fetched successfully")}catch(l){E.error("Failed to fetch decide data",l),(n=Q())==null||n.captureException(l)}try{await this._.endUserStore.fetchData(),this._.endUserStore.initializedSuccessfully&&(this._analytics.setBootStatus(!0),(o=this._.nudgesManager)==null||o.send({type:"END_USER_STORE_LOADED"}),E.debug("End user state loaded successfully"))}catch(l){E.error("Failed to fetch end user state",l),(a=Q())==null||a.captureException(l)}}forwardEvent(e){typeof e=="string"&&(e={event_type:e}),E.debug(`Registering event ${e.event_type}`),zr(this._,e.event_type,e.event_properties)}addIntegration(e){this._.integrations.push(e)}setThemeMode(e){["lightMode","darkMode","auto"].includes(e)&&(this._.themeMode=e)}addCallback(e,r){this.globalActions.addCallbacks({[e]:r})}setSessionProperty(e,r){if(!Or(e)){console.error("Invalid session property key",e);return}if(!Rr(r)){console.error("Invalid session property value",r);return}this.globalActions.setSessionProperties({[e]:r})}registerAction(e,r){let n=Mt(this._,e);if(!n){E.warn(`registerAction: Guide or survey with variantId: ${e} not found`);return}if(r.type==="show")this.nudgeActions.forceTriggerSingleNudge(n,{source:{type:"sdk"}});else if(r.type==="dismiss")Be(this._,n,0);else if(r.type==="snooze")Yr(this._,n,n.snoozeDuration,0);else if(r.type==="ctaClick"){let o=G(this._,e),a=ee(this._,e),l=(a==null?void 0:a.currentStep)||0,u=n.steps[l];if(!u){E.error(`registerAction: Step ${l} not found for nudge ${e}`);return}let p=u.content.find(m=>{var d;return m.type==="button"&&((d=m.meta)==null?void 0:d.buttonType)===r.buttonType});if(!p){E.error(`registerAction: No button with type ${r.buttonType} found in step ${l}`);return}r.surveyResponse&&(o==null||o.send({type:"UPDATE_SURVEY_RESPONSE",surveyResponse:r.surveyResponse}));let y=p.meta,i=Lr(u,{buttonMeta:y,surveyResponse:r.surveyResponse});Jr(this._,i,y,0,o)}else E.error(`registerAction: Invalid action type "${r.type}". Must be "show", "dismiss", "snooze", or "ctaClick"`)}async _configUser(){var u;(u=Q())==null||u.addBreadcrumb({level:"debug",category:"internal",message:"_configUser called"});let{organization:e,nudges:r,flags:n,themes:o,resourceCenters:a}=await fe(this._configuration.apiKey,this._.isEditorPreview);this._.flags=n,this._.themes=o;let[l]=a;l&&(this._.resourceCenter={...this._.resourceCenter,...l}),this.globalActions.setOrganization(e),this.nudgeActions.initNudges(r||[]),this.nudgeActions.setupTimedTriggers([...r])}_updateEditorPreviewDevice(e){this._.editorPreviewDevice=e}_getEditorPreviewDevice(){return this._.editorPreviewDevice}async _reload(e=ts){let r=await fe(this._configuration.apiKey,this._.isEditorPreview);for(let n of e){let a=this[n];a instanceof Function&&a(r)}}async _reloadOrganization(e){let{organization:r}=e||await fe(this._configuration.apiKey,this._.isEditorPreview);this.globalActions.setOrganization(r)}async _reloadNudges(e){let{nudges:r}=e||await fe(this._configuration.apiKey,this._.isEditorPreview);this.nudgeActions.initNudges(r||[])}async _reloadThemes(e){let{themes:r}=e||await fe(this._configuration.apiKey,this._.isEditorPreview);this._.themes=r}_startNudgeDebug(e){let{nudge:r}=e;this.nudgeActions.closeAllNudgeMocks(),this.nudgeActions.startDebugSession(r,{refreshDecide:!0,toStepIndex:0})}async _stopNudgeDebug(){this.nudgeActions.stopDebugSession()}_showNudgeStepMock(e){var r;(r=ae(this._))==null||r.forEach(n=>{n==null||n.send({type:"CLOSE"})}),this.nudgeActions.showStepMock(e.nudge,e.stepIndex,{forceOpen:e.forceOpen})}_closeNudgeMocks(){this.nudgeActions.closeAllNudgeMocks()}_setUserProperties(e){if(!this._.user){E.error("User is undefined, likely hasn't been booted yet");return}this._.user.user_properties={...this._.user.user_properties,...e}}_shareConfig(){return{organization:this._.organization||void 0,nudges:Se(this._)}}_shareTrackedEvents(){return{trackedEvents:[...this._.trackedAppEvents]}}_startDebug(){X.set("debug:nudges","true"),E.log("Enabled debugging for nudges. Restart the application.")}_stopDebug(){X.remove("debug:nudges"),E.log("Disabled debugging for nudges. Restart the application.")}_showResourceCenter(e,r){this.resourceCenterActions.showResourceCenter(e),(r==null?void 0:r.recSet)!==void 0&&this.resourceCenterActions.previewRecSet(r.recSet),r!=null&&r.resourceCenter&&(r==null?void 0:r.quickLinks)!==void 0&&this.resourceCenterActions.previewResourceCenter(r.resourceCenter,r.quickLinks),(r==null?void 0:r.autopilotKeywords)!==void 0&&this.resourceCenterActions.previewAutopilotKeywords(r.autopilotKeywords),(r==null?void 0:r.contentItemId)!==void 0&&this.resourceCenterActions.previewContentItem(r.contentItemId)}_startChat(e,r){e&&e!=="behavior-settings"&&r&&r.length>0&&this.resourceCenterActions.setCurrentChatSession(e,r,!0),this.resourceCenterActions.setInitialPage({item:{page:"assistant",params:{}}}),this.resourceCenterActions.showResourceCenter(!0)}_shareCurrentChatSession(){return this._.resourceCenter.currentChatSession}async _getDebugSnapshot(e){if(e!=null&&e.variantId){if(typeof e.variantId=="number"){let n=Mt(this._,e.variantId);if(n){let o=typeof e.stepIndex=="number"?e.stepIndex:0,a=await Rt(this._,n,o),{name:l}=_t(n),u=`${l} debug snapshot: ${a.guideOrSurvey.title} - ${a.guideOrSurvey.variant}`;console.log(u,a)}}return}let r=Se(this._);for(let n of r){let o=await Rt(this._,n),{name:a}=_t(n),l=`${a} debug snapshot: ${o.guideOrSurvey.title} - ${o.guideOrSurvey.variant}`;console.log(l,o)}}_debugStatus(){console.log({user:this._.user,apiKey:this._configuration.apiKey,stateInitialized:this._.endUserStore.initializedSuccessfully,decideSuccessful:this._.decide!=null,num_guides_surveys:Se(this._).length,analyticsIntegrations:this._.integrations.length})}_setTheme(e,r){e||(this._.themeOverride=void 0),this._.themeOverride={theme:e,mode:r}}_showWidgetTableau(e,r){this._.widgetTableauSelection=r,this._.showWidgetTableau=e}_addCallback(e,r){this.globalActions.addCallbacks({[e]:r})}_clearNudgeInteractions(e){e?this._.endUserStore.data={nudgeInteractions:{...this._.endUserStore.data.nudgeInteractions,[e]:Tt()}}:this._.endUserStore.data={nudgeInteractions:Object.fromEntries(Object.keys(this._.endUserStore.data.nudgeInteractions).map(r=>[r,Tt()]))},this._.endUserStore.pushData()}};g();var So=async(t,e)=>{let r=(u,p)=>{let y=p.split("."),i=u;for(let m of y){if(!(m in i)){E.warn(`Engagement SDK method ${p} is not defined.`);return}i=i[m]}return i},n=async u=>{let p=[...u],y=p.shift(),i=r(t,y);if(i)if(dt.includes(y))if(p[0]instanceof Function){let m=p.shift(),d=p.shift();try{await i(...p).then(m,d)}catch(s){E.error(s)}}else await i(...p);else await i(...p)},a=(async u=>{do{let p=e.findIndex(i=>(i==null?void 0:i[0])===u);if(p===-1)break;let y=e.splice(p,1)[0];await n(y)}while(!0)})("boot"),l=[];for(;e.length>0;){let u=e.shift();if(!u)continue;let p=u[0];if(p==="boot"){l.push(u);continue}wo.includes(p)?await n(u):n(u)}return e.length=0,a.then(async()=>{for(let u=0;u<l.length;u++){let p=l[u];await n(p)}}),t};g();var ns=4,os=500,is=500,Eo=t=>{let e,r=0,n=0,o=()=>{let a=Date.now();a-n<=is&&(r+=1,clearTimeout(e),e=setTimeout(()=>r=0,os)),n=a,r>=ns&&(t.messageBus.publish("rage_click"),r=0,clearTimeout(e))};return document.body.addEventListener("click",o),()=>{document.body.removeEventListener("click",o)}};g();var xo=t=>{let a=0,l=-1,u=-1,p=-1,y,i=m=>{let{clientX:d,clientY:s,timeStamp:c}=m;if(l!==-1&&u!==-1&&p!==-1){let b=Math.abs(d-l),w=Math.abs(s-u);Math.sqrt(b**2+w**2)/(c-p)>5&&c-p<=100&&(a+=1,clearTimeout(y),y=setTimeout(()=>a=0,500)),a>=15&&(t.messageBus.publish("user_confusion"),a=0,clearTimeout(y))}l=d,u=s,p=c};return document.body.addEventListener("mousemove",i),()=>{document.body.removeEventListener("mousemove",i)}};g();var ko=L(Fn()),ss=5e3,as=6e4,Co=t=>{let e=!1,r=()=>{e&&t.messageBus.publish("user_inactive")};setTimeout(()=>e=!0,as);let n=(0,ko.default)(r,ss);return document.body.addEventListener("mousemove",n),document.body.addEventListener("keydown",n),()=>{document.body.removeEventListener("mousemove",n),document.body.removeEventListener("keydown",n)}};g();var To=t=>{t.messageBus.subscribe("location_change",()=>{var r,n,o;(r=ae(t))==null||r.forEach(a=>{let l=a.getSnapshot(),u=l.context.nudge;l.matches({Step:"Render Loop"})&&Br(t,u)&&(a==null||a.send({type:"CLOSE"}))});let e=Pr(((n=t.organization)==null?void 0:n.shareLinkParam)||It,t.location.search);if(e){let a=e.flagKey,l=Se(t);if((o=t.nudgesManager)==null||o.send({type:"HANDLE_SHARE_LINK",flagKey:a}),l.find(u=>u.flagKey===a)){let u=new URL(window.location.href);u.searchParams.delete(It);let p=u.toString();window.history.replaceState({},document.title,p)}}Ot(t,{trigger:{type:"active"},source:{type:"active"},overrides:{cooldown:!0,customThrottles:!0,page:!0}}),Ot(t,{trigger:{type:"immediately"},source:{type:"trigger",properties:{triggerType:"immediately"}}})})};g();var Io=t=>{let e=r=>{let n=r.data.action;if(n)n==="startDebugSession"?t.messageBus.publish("start_debug",{event:r}):n==="startRecorderSession"&&t.messageBus.publish("start_recorder",{event:r});else return};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}};g();g();var _o=L(Fn());var cs={observerOptions:{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]},debounceMs:150},ut=class{constructor(e,r,n=[],o={}){this.mutationObserver=null;this.processMutationsImmediately=()=>{if(this.mutationObserver)try{this.onMutations()}catch(e){E.error("Error processing mutations:",{error:e})}};this.handleMutations=e=>{try{e.some(n=>this.shouldProcessMutation(n))&&this.processMutationsDebounced()}catch(r){E.error("Error handling mutations:",{error:r,mutationCount:e.length})}};this.target=e,this.onMutations=r,this.filters=n,this.options={...cs,...o},this.processMutationsDebounced=(0,_o.default)(this.processMutationsImmediately,this.options.debounceMs,{maxWait:this.options.debounceMs*2})}shouldProcessMutation(e){if(this.filters.length===0)return!0;try{return this.filters.every(r=>r(e))}catch(r){return E.error("Error in mutation filter:",{error:r,mutation:e}),!1}}cleanup(){var e;this.processMutationsDebounced.cancel(),(e=this.mutationObserver)==null||e.disconnect(),this.mutationObserver=null}observe(){return this.mutationObserver&&this.cleanup(),this.mutationObserver=new MutationObserver(this.handleMutations),this.mutationObserver.observe(this.target,this.options.observerOptions),()=>{this.cleanup()}}};var ds=t=>!(ke(t.target)||Array.from(t.addedNodes).some(ke)||Array.from(t.removedNodes).some(ke)),Ao=t=>new ut(document.documentElement,()=>{t.messageBus.publish("dom_mutation")},[ds]).observe();g();g();var ne=L(z());var Mo=(t,e,r,n={})=>{var p,y,i,m,d;if((i=(y=(p=me())==null?void 0:p[O])==null?void 0:y.options)!=null&&i.headless)return;let o=(m=n==null?void 0:n.renderMode)!=null?m:0;e=Wr(e,t);let a=Dr(e);if(Ge(e)){t.activeChecklist={nudge:e,renderMode:o,defaultOpenIdx:o===1?r:void 0};return}if(Ur(e)){let[s]=e.steps,c=`${e.variantId}-${String(s.id)}${o===1?"-mock":""}`;De(c,{asChild:!0,element:ne.default.createElement(ao,{forceOpen:n==null?void 0:n.forceOpen,nudge:e,renderMode:o,step:s,anchorOverride:n==null?void 0:n.anchorOverride,handleDestroy:()=>Be(t,e,o),onMarkerView:()=>{if(o===1)return;let b=G(t,e.variantId);Re.nudge.tooltipMarkerViewed(e,r,{...b==null?void 0:b.getSnapshot().context,interactionState:ee(t,e.variantId)})},onOpen:()=>{o!==1&&Re.nudge.viewed(e,r,{...n.context,interactionState:ee(t,e.variantId)})}})});return}if(Fr(e)){let[s]=e.steps,c=`${e.variantId}-${String(s.id)}${o===1?"-mock":""}`;qn(c,{element:ne.default.createElement(Ln,{nudge:e,stepIndex:r,renderMode:o}),sticky:s==null?void 0:s.formFactor.sticky,position:s==null?void 0:s.formFactor.position});return}let l=ge(e,r),u=()=>{a&&Be(t,e,o)};switch(l==null?void 0:l.formFactor.type){case"popover":{let s=`${e.variantId}-${String(l.id)}${o===1?"-mock":""}`,c=l.formFactor.position==="center";De(s,{element:ne.default.createElement(Ut,{nudge:e,renderMode:o,stepIndex:r,center:c}),position:l.formFactor.position,duration:Number.POSITIVE_INFINITY,hasWideContent:At(l),themeProvider:({children:b})=>ne.default.createElement(se,{nudge:e},b),onEscapeKeyDown:u});break}case"modal":{t.currentModalNudge=Ir({nudge:e,stepIndex:r,renderMode:o});break}case"pin":{Ye(l)&&De(`${e.variantId}-${String(l.id)}${o===1?"-mock":""}`,{element:ne.default.createElement(Dn,{nudge:e,step:l,renderMode:o,stepIndex:r,anchorOverride:n==null?void 0:n.anchorOverride}),duration:Number.POSITIVE_INFINITY,themeProvider:({children:s})=>ne.default.createElement(se,{nudge:e},s),onEscapeKeyDown:u,onEnterKeyDown:()=>Zr(t,e)});break}default:{(d=sr())==null||d.captureMessage(`Unknown form factor type: ${l==null?void 0:l.formFactor}`,"error",{captureContext:{tags:{product:"nudges"}}});let s=l&&At(l);De(`${e.variantId}-${String(l==null?void 0:l.id)}${o===1?"-mock":""}`,{element:ne.default.createElement(Ut,{nudge:e,renderMode:o,stepIndex:r}),position:"top-right",duration:Number.POSITIVE_INFINITY,hasWideContent:s,themeProvider:({children:c})=>ne.default.createElement(se,{nudge:e},c),onEscapeKeyDown:u})}}};g();var No=(t,e)=>{let r=xe(t);if(!r)return;let n=()=>{e()};return r.addEventListener("click",n),()=>r.removeEventListener("click",n)};g();var Po=(t,e)=>{var r,n;for(let o=0;o<e.steps.length;o++){let a=ge(e,o);((r=t.currentModalNudge)==null?void 0:r.renderMode)===1&&(t.currentModalNudge=null),((n=t.activeChecklist)==null?void 0:n.renderMode)===1&&(t.activeChecklist=null),Dt(`${e.variantId}-${String(a==null?void 0:a.id)}-mock`),Kt(`${e.variantId}-${String(a==null?void 0:a.id)}-mock`)}},Oo=t=>{var e,r;an(/-mock$/),Gn(/-mock$/),((e=t.currentModalNudge)==null?void 0:e.renderMode)===1&&(t.currentModalNudge=null),((r=t.activeChecklist)==null?void 0:r.renderMode)===1&&(t.activeChecklist=null)},Ro=(t,e,r)=>{var o;let n=ge(e,r);if(Ge(e)){if(!t.activeChecklist)return;t.activeChecklist=null}else $r(n)&&((o=t.currentModalNudge)==null?void 0:o.renderMode)!==1?t.currentModalNudge=null:(Dt(`${e.variantId}-${String(n==null?void 0:n.id)}`),Kt(`${e.variantId}-${String(n==null?void 0:n.id)}`))};g();var Bo=(t,e)=>{Un(t,e)},Do=(t,e)=>{t.resourceCenter.currentContentItemId=e?e.toString():null},Lo=(t,e)=>{t.resourceCenter.previewedRecommendationSet=e},Uo=(t,e,r)=>{t.resourceCenter={...t.resourceCenter,...e,previewedAdditionalResources:r}},Fo=(t,e)=>{t.resourceCenter.customAutopilotKeywords=e};g();var $o=async(t,e)=>{var n,o;let r=()=>{};switch((n=e==null?void 0:e.meta)==null?void 0:n.type){case"intercom":r=()=>window.Intercom("showNewMessage");break;case"helpscout":r=()=>window.Beacon("open");break;case"freshdesk":r=()=>window.FreshworksWidget("open");break;case"freshchat":{r=async()=>window.fcWidget.open();break}case"gist":r=()=>window.gist.chat("open");break;case"crisp":r=()=>{window.$crisp.push(["do","chat:open"]),window.$crisp.push(["do","chat:show"])};break;case"talkdesk_v2":r=()=>{window.webchat.open()};break;case"zendesk":{r=()=>{try{window.zE("messenger","open")}catch(a){window.zE("webWidget","open"),window.zE("webWidget","show")}};break}case"liveChat":r=()=>window.LiveChatWidget.call("maximize");break;case"olark":r=()=>window.olark("api.box.expand");break;case"hubspot":r=()=>window.HubSpotConversations.widget.open();break;case"drift":r=()=>window.drift.api.openChat();break;case"pylon":r=()=>window.Pylon("show")}try{await r()}catch(a){(o=Q())==null||o.captureException(a)}},Ko=(t,e,r)=>{let n=Hr(e.value,t,!0);if(r){window.open(n,"_blank");return}switch(e.operation){case"router":{let o=t.callbacks["engagement-router"];if(o)o(n);else throw new Kr("Link is of router type, but router is not defined.");break}case"self":window.open(n,"_self");break;case"blank":window.open(n,"_blank");break;default:window.open(n,"_blank");break}},Ho=(t,e)=>{};var ls=Wo().UAParser,us=()=>typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||"",ps=t=>{var e,r;return[(e=t.browser)==null?void 0:e.name,(r=t.browser)==null?void 0:r.major].filter(n=>n!=null).join(" ")},ms=t=>{var e;return(e=t.os)==null?void 0:e.name},gs=t=>{var r;let e=(r=t.browser)==null?void 0:r.name;return e!=null&&e.includes("Chrom")&&(e="Chrome"),e!=null&&e.includes("Firefox")&&(e="Firefox"),e!=null&&e.includes("Safari")&&(e="Safari"),e!=null&&e.includes("Edge")&&(e="Edge"),e!=null&&e.includes("Opera")&&(e="Opera"),e||"Unknown"},fs=()=>{var t;if((t=window==null?void 0:window.document)!=null&&t.cookie)try{return Object.fromEntries(window.document.cookie.split("; ").map(e=>e.split("=")))}catch(e){return}},hs=t=>{var e,r;try{let n=JSON.parse(Pt.get(t,"{}"));return n.landing_url||(n.landing_url=(r=(e=window==null?void 0:window.location)==null?void 0:e.href)==null?void 0:r.replace(/\/$/,""),Pt.set(t,JSON.stringify(n))),n.landing_url}catch(n){return}},ys=t=>{try{let e=JSON.parse(X.get(t,"{}"));return e.first_seen||(e.first_seen=(Date.now()/1e3).toString(),X.set(t,JSON.stringify(e))),e.first_seen}catch(e){return}},bs=()=>{var e;if(!(window!=null&&window.location))return;let t={};try{let r=new URL(window.location.href);for(let[n,o]of r.searchParams)t[n]=[...(e=t[n])!=null?e:[],...o.split(",")]}catch(r){return}return Object.entries(t).reduce((r,[n,o])=>(r[n]=o.length===1?o[0]:o,r),{})},ws=t=>{var n,o,a,l,u,p,y;let e=typeof(window==null?void 0:window.navigator)<"u"?window.navigator.userAgent:void 0,r=new ls(e).getResult();return{language:us(),platform:"Web",os:ps(r),device_model:ms(r),device_category:(o=(n=r.device)==null?void 0:n.type)!=null?o:"desktop",referring_url:(a=window==null?void 0:window.document)==null?void 0:a.referrer.replace(/\/$/,""),cookie:fs(),browser:gs(r),landing_url:hs(`ENGAGEMENT_${(u=(l=window.engagement)==null?void 0:l[O].apiKey)==null?void 0:u.slice(0,10)}_DEFAULT_USER_PROVIDER`),first_seen:ys(`ENGAGEMENT_${(y=(p=window.engagement)==null?void 0:p[O].apiKey)==null?void 0:y.slice(0,10)}_DEFAULT_USER_PROVIDER`),url_param:bs(),user_agent:e,...t}},zo={renderNudge:Mo,addClickListener:No,clickElement:pn,closeNudgeMock:Po,closeAllNudgeMocks:Oo,closeStep:Ro,onLocationChange:on,postMessageToDashboard:Je,openChatExecutable:$o,linkExecutable:Ko,appReviewExecutable:Ho,getDefaultUIMode:rn,isElementVisible:mn,matchesSelector:un,showResourceCenter:Bo,setCurrentContentId:Do,previewRecSet:Lo,previewResourceCenter:Uo,previewAutopilotKeywords:Fo,enrichUser:ws};g();var Vt=async(t,e)=>{let r=await fetch(t,{...e,body:e.body!=""?e.body:void 0});return{status:r.status,statusText:r.statusText,headers:Object.fromEntries(r.headers.entries()),data:await r.text(),ok:r.ok}};typeof window<"u"?window.simpleFetch=Vt:typeof globalThis<"u"?globalThis.simpleFetch=Vt:typeof window<"u"&&(window.simpleFetch=Vt);g();var vs=t=>{let e=new TextEncoder().encode(t),r=Array.from(e,n=>String.fromCodePoint(n)).join("");return btoa(r)},Ss=t=>{let e=atob(t),r=new TextEncoder().encode(e);return JSON.parse(new TextDecoder().decode(r))};globalThis.base64Encode=vs;globalThis.base64Decode=Ss;g();var Es=t=>!t.target||!ke(t.target),Vo=t=>{let e=r=>{Es(r)&&t.messageBus.publish("click",{event:{type:r.type,target:r.target,currentTarget:r.currentTarget,preventDefault:()=>r.preventDefault(),stopPropagation:()=>r.stopPropagation()}})};return document.body.addEventListener("click",e),()=>{document.body.removeEventListener("click",e)}};g();var xs=30,ks=0,jo=t=>{let e=null,r=()=>{t.messageBus.publish("exit_intent")},n=a=>{a.clientY>xs||(e=setTimeout(r,ks))},o=()=>{e&&(clearTimeout(e),e=null)};return document.documentElement.addEventListener("mouseleave",n),document.documentElement.addEventListener("mouseenter",o),()=>{document.body.removeEventListener("mouseleave",n),document.body.removeEventListener("mouseenter",o)}};g();var qo="gs-debug-id",Go=t=>{t.messageBus.subscribe("location_change",()=>{let r=new URLSearchParams(t.location.search).get(qo);if(r){let n=new URL(window.location.href);n.searchParams.delete(qo);let o=n.toString();window.history.replaceState({},document.title,o),Gr(t,{variantId:Number(r)},{toStepIndex:0})}})};var Cs=()=>{let t=document.getElementById("engagement-wrapper"),e=document.getElementById("engagement-container");return t||(t=document.createElement("div"),t.setAttribute("id","engagement-wrapper"),t.setAttribute("data-engagement","1"),document.body.appendChild(t)),e||(e=document.createElement("div"),e.setAttribute("id","engagement-container"),e.setAttribute("data-engagement","1"),t.appendChild(e)),e},Ts=t=>{switch(t){case"US":return"https://gs.amplitude.com";case"EU":return"https://gs.eu.amplitude.com";default:return"http://localhost:10001"}},Is=t=>{switch(t){case"US":return"https://houston-chat.amplitude.com";case"EU":return"https://houston-chat.eu.amplitude.com";default:return"http://localhost:11001"}},jt={local:"http://localhost:10002/index.js",staging:"https://cdn.amplitude.com/engagement-browser/staging/index.min.js.gz",stag:"https://cdn.amplitude.com/engagement-browser/staging/index.min.js.gz",stag2:"https://cdn.amplitude.com/engagement-browser/staging/index.min.js.gz",rc:"https://cdn.amplitude.com/engagement-browser/rc/index.min.js.gz",prod:"https://cdn.amplitude.com/engagement-browser/prod/index.min.js.gz",prodEu:"https://cdn.amplitude.com/engagement-browser/prod-eu/index.min.js.gz"},qt={local:"http://localhost:10002/split/index.js",staging:"https://cdn.amplitude.com/engagement-browser/staging/split/index.js",stag:"https://cdn.amplitude.com/engagement-browser/staging/split/index.js",stag2:"https://cdn.amplitude.com/engagement-browser/staging/split/index.js",rc:"https://cdn.amplitude.com/engagement-browser/rc/split/index.js",prod:"https://cdn.amplitude.com/engagement-browser/prod/split/index.js",prodEu:"https://cdn.amplitude.com/engagement-browser/prod-eu/split/index.js"},Gt={local:"http://localhost:10001",staging:"https://gs.stag2.amplitude.com",stag:"https://gs.stag2.amplitude.com",stag2:"https://gs.stag2.amplitude.com",prod:"https://gs.amplitude.com",prodUs:"https://gs.amplitude.com",prodEu:"https://gs.eu.amplitude.com"},Yt={local:"http://localhost:11001",staging:"https://houston-chat.stag2.amplitude.com",stag:"https://houston-chat.stag2.amplitude.com",stag2:"https://houston-chat.stag2.amplitude.com",rc:"https://houston-chat.stag2.amplitude.com",prod:"https://houston-chat.amplitude.com",prodUs:"https://houston-chat.amplitude.com",prodEu:"https://houston-chat.eu.amplitude.com"};function _s(t){let e={};return t.split(";").forEach(n=>{let[o,a]=n.split("=");o&&(e[o]=a)}),e}var Yo=async()=>{var d,s,c,b,w,h;let t=localStorage.getItem("amplitude.engagement.launchCode");if(t){let f=_s(t),v=document.currentScript||document.getElementById("engagement-sdk-bundle");if(v){let N=window.engagement[O].options.splitting&&(f==null?void 0:f.sdk)!=="local",x=N?qt==null?void 0:qt[f==null?void 0:f.sdk]:jt==null?void 0:jt[f==null?void 0:f.sdk];if(x&&v.src!==x){(d=v.parentNode)==null||d.removeChild(v);let R=document.createElement("script");R.src=x,R.id="engagement-sdk-bundle";let B=document.querySelector("[nonce]");B&&R.setAttribute("nonce",B.nonce||B.getAttribute("nonce")),N&&R.setAttribute("type","module"),document.getElementsByTagName("head")[0].appendChild(R);return}}if(f!=null&&f.server){let N=Gt==null?void 0:Gt[f==null?void 0:f.server];N&&(window.engagement[O].serverUrl=N);let x=Yt==null?void 0:Yt[f==null?void 0:f.server];x&&(window.engagement[O].chatUrl=x)}}if(((s=window.engagement)==null?void 0:s._initStarted)===!0)return;window.engagement&&(window.engagement._initStarted=!0);let e=window.engagement,{apiKey:r,serverUrl:n,serverZone:o,chatUrl:a}=e._configuration,l=X.get("takeover","");if(!r)throw new Error("Organization `apiKey` has not been set on the global _configuration object. Make sure you've called `init` before loading this script");let u=X.get("localeOverride","");u&&(e[O].locale=u),e[O].serverUrl=n||Ts(o),e[O].chatUrl=a||Is(o),e[O].apiKey=r,(c=e[O].options)!=null&&c.logger?console.log("Using custom logger",e[O].options.logger):(console.log("Using default logger"),e[O].options.logger=new ir),(b=e[O].options)!=null&&b.logger&&e[O].options.logger.enable((h=(w=e[O].options)==null?void 0:w.logLevel)!=null?h:2),l&&(e[O].apiKey=l),E.log("initializing client SDK..."),sn();let p=document.getElementById("engagement-is-dashboard-preview-pane")!==null,y=document.getElementById("assistant-preview-pane-iframe")!==null,i=Qr({isEditorPreview:p,isAssistantPreview:y,platform:nn(),location:{href:window.location.href,pathname:window.location.pathname,search:window.location.search},services:zo,persistResourceCenter:e._configuration.options.persistResourceCenter});en(i),e._configuration.options.headless||(Eo(i),xo(i),Co(i),jo(i),Ao(i),Vo(i),To(i),Go(i)),Io(i);let m=new lt(i,e._configuration);if(await m._configUser(),m=await So(m,e._q),Object.assign(window.engagement,m),Object.setPrototypeOf(window.engagement,m),e._configuration.options.headless)E.debug("Engagement bundle loaded in headless mode - no UI rendered");else{let f=Cs();Xo.default.render(Zo.default.createElement(lo,{store:i}),f),E.debug("Engagement bundle loaded and container rendered")}};Je("ENGAGEMENT_LOADED");window.engagement?Yo().catch(console.error):window.engagement=vo(Yo);var ju=void 0;export{ju as default};
